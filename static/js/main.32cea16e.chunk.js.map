{"version":3,"sources":["serviceWorker.js","optionArr.js","App.js","index.js"],"names":["Boolean","window","location","hostname","match","commonProps","color","background","bottom","top","right","left","width","height","rotate","borderRadius","borderWidth","borderColor","align","shadow","optionArr","type","css","name","Object","objectSpread","text","fontSize","fontWeight","maxLines","lineHeight","textStyle","fontFamily","textAlign","padding","textDecoration","hasBorder","mode","Option","Select","fabric","message","config","maxCount","QRErrorCorrectLevel","_config","canvasState","currentStateIndex","undoStatus","redoStatus","undoFinishedStatus","redoFinishedStatus","newOptionArr","_","cloneDeep","App","props","_this","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","addShape","bind","assertThisInitialized","generateCode","copyCode","viewCode","handerUndo","handerRedo","state","redoButtonStatus","undoButtonStatus","currentOptionArr","views","canvas_sprite","shapes","rect","image","qrcode","Canvas","that","on","e","obj","target","currentHeight","canvas","currentWidth","setCoords","getBoundingRect","Math","max","min","updateCanvasState","index","fill","textBox","Textbox","Rect","rx","strokeWidth","stroke","angle","selectable","add","Shape","console","log","set","renderAll","originX","originY","backgroundColor","loadImageUrl","imgBase64","jrQrcode","getQrBase64","correctLevel","reverse","foreground","push","imgUrl","Promise","resolve","Image","fromURL","oImg","rects","forEach","item","i","remove","texts","_this2","keys","item2","copy","success","error","jsonData","toJSON","canvasAsJson","JSON","stringify","length","indexToBeInserted","numberOfElementsToRetain","splice","setState","loadFromJSON","clear","_this3","_react_16_9_0_react_default","a","createElement","id","className","es_button","onClick","map","key","i2","isArray","input","defaultValue","onChange","event","value","es_select","style","item3","i3","React","Component","ReactDOM","render","src_App_0","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.32cea16e.chunk.js","sourcesContent":["// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","let commonProps = {\r\n  color: '#000000', //字体颜色 linear-gradient(-135deg, #fedcba 0%, rgba(18, 52, 86, 1) 20%, #987 80%)\r\n  background: '#538e60', //文字区域背景色\r\n  bottom: 40, //优先取这个bottom top必须要有一个\r\n  top: 100,\r\n  right: 40, //优先取这个right left必须要有一个\r\n  left: 100,\r\n  width: 100,\r\n  height: 200, //高度,没有的话就自适应\r\n  rotate: 0,\r\n  borderRadius: 10,\r\n  borderWidth: 2,\r\n  borderColor: '#000000',\r\n  align: ['center', 'left', 'right'], //view 的对齐方式\r\n  shadow: '10 10 5 #888888' //阴影\r\n};\r\nexport default [\r\n  {\r\n    type: 'canvas',\r\n    css: {\r\n      width: '654',\r\n      height: '1000',\r\n      background: '#eee'\r\n    }\r\n  },\r\n  {\r\n    type: 'text',\r\n    name: '文字',\r\n    css: {\r\n      ...commonProps,\r\n      text: '    我是来测试的阿发发萨芬撒发',\r\n      fontSize: '30',\r\n      fontWeight: 'bold', //文字加粗 可以不写\r\n      maxLines: '', //最大行数\r\n      lineHeight: '20',\r\n      textStyle: ['fill', 'stroke'], //fill： 填充样式，stroke：镂空样式\r\n      fontFamily: '',\r\n      textAlign: ['center', 'left', 'right'], //文字的对齐方式，分为 left, center, right\r\n      padding: '10',\r\n      textDecoration: ['none', 'overline', 'underline', 'linethrough'],\r\n      hasBorder: [1, 1] //overline underline line-through 可组合\r\n    }\r\n  },\r\n  {\r\n    type: 'rect',\r\n    name: '矩形',\r\n    css: {\r\n      ...commonProps\r\n    }\r\n  },\r\n  {\r\n    type: 'image',\r\n    name: '图片',\r\n    css: {\r\n      ...commonProps,\r\n      mode: ['aspectFill', 'scaleToFill', 'aspectFill']\r\n    }\r\n  },\r\n  {\r\n    type: 'qrcode',\r\n    name: '二维码',\r\n    css: {\r\n      ...commonProps\r\n    }\r\n  }\r\n];\r\n","import React from 'react';\r\nimport fabric from 'fabric';\r\nimport _ from 'lodash';\r\nimport jrQrcode from 'jr-qrcode';\r\nimport optionArr from './optionArr';\r\nimport './App.scss';\r\nimport { Button, Input, message, Select } from 'antd';\r\nimport copy from 'copy-to-clipboard';\r\n//import axios from 'axios';\r\nconst { Option } = Select;\r\nfabric = fabric.fabric;\r\nmessage.config({\r\n  maxCount: 1\r\n});\r\nlet QRErrorCorrectLevel = {\r\n  L: 1,\r\n  M: 0,\r\n  Q: 3,\r\n  H: 2\r\n};\r\nlet _config = {\r\n  canvasState: [],\r\n  currentStateIndex: -1,\r\n  undoStatus: false,\r\n  redoStatus: false,\r\n  undoFinishedStatus: 1,\r\n  redoFinishedStatus: 1\r\n};\r\n//得到当前默认信息\r\nlet newOptionArr = _.cloneDeep(optionArr);\r\nnewOptionArr[1].css.textStyle = newOptionArr[1].css.textStyle[0];\r\nnewOptionArr[1].css.textAlign = newOptionArr[1].css.textAlign[0];\r\nnewOptionArr[1].css.textDecoration = newOptionArr[1].css.textDecoration[0];\r\nnewOptionArr[1].css.hasBorder = newOptionArr[1].css.hasBorder[0];\r\nnewOptionArr[3].css.mode = newOptionArr[3].css.mode[0];\r\nclass App extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.addShape = this.addShape.bind(this);\r\n    this.generateCode = this.generateCode.bind(this);\r\n    this.copyCode = this.copyCode.bind(this);\r\n    this.viewCode = this.viewCode.bind(this);\r\n    this.handerUndo = this.handerUndo.bind(this);\r\n    this.handerRedo = this.handerRedo.bind(this);\r\n    this.state = {\r\n      redoButtonStatus: '',\r\n      undoButtonStatus: ''\r\n    };\r\n    this.currentOptionArr = newOptionArr; //当前图像数据集合\r\n    this.views = []; //所有元素的信息\r\n    this.canvas_sprite = ''; //渲图片的canvas对象\r\n    this.shapes = {\r\n      text: [],\r\n      rect: [],\r\n      image: [],\r\n      qrcode: []\r\n    };\r\n    this.height = 300; //固定死\r\n    this.width = 0; //通过实际宽高比计算出来的\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.canvas_sprite = new fabric.Canvas('merge');\r\n    let that = this;\r\n    this.canvas_sprite.on('object:moving', function(e) {\r\n      var obj = e.target;\r\n      // if object is too big ignore\r\n      if (obj.currentHeight > obj.canvas.height || obj.currentWidth > obj.canvas.width) {\r\n        return;\r\n      }\r\n      obj.setCoords();\r\n      // top-left  corner\r\n      if (obj.getBoundingRect().top < 0 || obj.getBoundingRect().left < 0) {\r\n        obj.top = Math.max(obj.top, obj.top - obj.getBoundingRect().top);\r\n        obj.left = Math.max(obj.left, obj.left - obj.getBoundingRect().left);\r\n      }\r\n      // bot-right corner\r\n      if (\r\n        obj.getBoundingRect().top + obj.getBoundingRect().height > obj.canvas.height ||\r\n        obj.getBoundingRect().left + obj.getBoundingRect().width > obj.canvas.width\r\n      ) {\r\n        obj.top = Math.min(\r\n          obj.top,\r\n          obj.canvas.height - obj.getBoundingRect().height + obj.top - obj.getBoundingRect().top\r\n        );\r\n        obj.left = Math.min(\r\n          obj.left,\r\n          obj.canvas.width - obj.getBoundingRect().width + obj.left - obj.getBoundingRect().left\r\n        );\r\n      }\r\n      /* let { top, left, width, height } = e.target;\r\n      let { optionArr } = that.state;\r\n      let optionArrIndex = optionArr.findIndex(function(item) {\r\n        return item.text === e.target.text;\r\n      });\r\n      let optionArrNew = JSON.parse(JSON.stringify(optionArr));\r\n      for (let index = 0; index < optionArrIndex; index++) {\r\n        left -= optionArrNew[index].frames * that.width;\r\n      }\r\n      optionArrNew[optionArrIndex] = {\r\n        ...optionArrNew[optionArrIndex],\r\n        textWidth: width,\r\n        textHeight: height,\r\n        left,\r\n        top\r\n      };\r\n      that.setState({\r\n        optionArr: optionArrNew\r\n      }); */\r\n    });\r\n    this.canvas_sprite.on('object:modified', function() {\r\n      that.updateCanvasState();\r\n    });\r\n\r\n    this.canvas_sprite.on('object:added', function() {\r\n      that.updateCanvasState();\r\n    });\r\n    this.addShape(1);\r\n  }\r\n\r\n  async addShape(index) {\r\n    const that = this;\r\n    const currentOptionArr = this.currentOptionArr;\r\n    let { type, css } = currentOptionArr[index];\r\n    let {\r\n      width,\r\n      height,\r\n      text,\r\n      color,\r\n      fontSize,\r\n      left,\r\n      top,\r\n      fontWeight,\r\n      fontFamily,\r\n      padding,\r\n      textDecoration,\r\n      borderRadius,\r\n      borderWidth,\r\n      borderColor,\r\n      background,\r\n      rotate,\r\n      hasBorder,\r\n      align,\r\n      shadow,\r\n      mode\r\n    } = css;\r\n    let Shape;\r\n    switch (type) {\r\n      case 'text':\r\n        let config = {\r\n          width,\r\n          height,\r\n          fill: color,\r\n          //backgroundColor: background,\r\n          fontWeight,\r\n          left, //距离画布左侧的距离，单位是像素\r\n          top, //距离画布上边的距离\r\n          fontSize, //文字大小\r\n          fontFamily,\r\n          padding,\r\n          [textDecoration]: true,\r\n          //lockUniScaling: true, //只能等比缩放\r\n          textAlign: align,\r\n          shadow,\r\n          angle: rotate,\r\n          splitByGrapheme: true, //文字换行\r\n          zIndex: 2\r\n        };\r\n        let textBox = new fabric.Textbox(text, config);\r\n        if (hasBorder === 1) {\r\n          let Rect = new fabric.Rect({\r\n            width,\r\n            height,\r\n            left, //距离画布左侧的距离，单位是像素\r\n            top,\r\n            rx: borderRadius,\r\n            //ry:borderRadius,\r\n            strokeWidth: borderWidth,\r\n            stroke: borderColor,\r\n            fill: 'rgba(0,0,0,0)',\r\n            angle: rotate,\r\n            selectable: false\r\n          });\r\n          this.canvas_sprite.add(Rect);\r\n          Shape = textBox;\r\n          Shape.on('moving', function(e) {\r\n            console.log('eeeee', e);\r\n            Rect.set({\r\n              left: e.target.left,\r\n              top: e.target.top\r\n            });\r\n            that.canvas_sprite.renderAll();\r\n          });\r\n          Shape.on('scaling', function(e) {\r\n            Rect.set({\r\n              width: e.target.width,\r\n              height: e.target.height\r\n            });\r\n            that.canvas_sprite.renderAll();\r\n          });\r\n          Shape.on('rotating', function(e) {\r\n            Rect.set({\r\n              angle: e.target.angle,\r\n              originX: 'left',\r\n              originY: 'top',\r\n              width: e.target.width,\r\n              height: e.target.height,\r\n              left: e.target.left,\r\n              top: e.target.top\r\n            });\r\n            that.canvas_sprite.renderAll();\r\n          });\r\n          /* Shape = new fabric.Group([Rect, textBox], {\r\n            left,\r\n            top,\r\n            angle: rotate,\r\n          });\r\n          Shape.on('scaling', function (e) {\r\n            textBox.set({\r\n              fontSize\r\n            })\r\n            that.canvas_sprite.renderAll();\r\n          }) */\r\n        } else {\r\n          Shape = textBox;\r\n        }\r\n        break;\r\n      case 'rect':\r\n        Shape = new fabric.Rect({\r\n          width,\r\n          height,\r\n          left,\r\n          top,\r\n          borderRadius,\r\n          borderWidth,\r\n          borderColor,\r\n          backgroundColor: background,\r\n          align,\r\n          rotate,\r\n          shadow\r\n        });\r\n        break;\r\n      case 'image':\r\n        Shape = await this.loadImageUrl(\r\n          'https://operate.maiyariji.com/20190709%2F3da002983292a6950a71ca7392a21827.jpg'\r\n        );\r\n        Shape.set({\r\n          width,\r\n          height,\r\n          left,\r\n          top,\r\n          borderRadius,\r\n          borderWidth,\r\n          borderColor,\r\n          backgroundColor: background,\r\n          align,\r\n          rotate,\r\n          mode,\r\n          shadow\r\n        });\r\n        break;\r\n      case 'qrcode':\r\n        var imgBase64 = jrQrcode.getQrBase64('hello world', {\r\n          padding: padding, // 二维码四边空白（默认为10px）\r\n          width: width, // 二维码图片宽度（默认为256px）\r\n          height: height, // 二维码图片高度（默认为256px）\r\n          correctLevel: QRErrorCorrectLevel.H, // 二维码容错level（默认为高）\r\n          reverse: false, // 反色二维码，二维码颜色为上层容器的背景颜色\r\n          background: background, // 二维码背景颜色（默认白色）\r\n          foreground: color // 二维码颜色（默认黑色）\r\n        });\r\n        Shape = await this.loadImageUrl(imgBase64);\r\n        Shape.set({\r\n          width,\r\n          height,\r\n          left,\r\n          top,\r\n          borderRadius,\r\n          borderWidth,\r\n          borderColor,\r\n          backgroundColor: background,\r\n          align,\r\n          rotate,\r\n          mode,\r\n          shadow\r\n        });\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n    this.shapes[type].push(Shape);\r\n    this.canvas_sprite.add(Shape);\r\n  }\r\n  loadImageUrl(imgUrl) {\r\n    return new Promise(resolve => {\r\n      fabric.Image.fromURL(imgUrl, function(oImg) {\r\n        resolve(oImg);\r\n      });\r\n    });\r\n  }\r\n  clearCanvas() {\r\n    this.rects.forEach(function(item, i) {\r\n      item.remove();\r\n    });\r\n    this.texts.forEach(function(item, i) {\r\n      item.remove();\r\n    });\r\n  }\r\n  generateCode() {\r\n    let shapes = this.shapes;\r\n    this.views = [];\r\n    Object.keys(shapes).forEach(item => {\r\n      shapes[item].forEach((item2, index) => {\r\n        console.log('shapes[item2]', item2);\r\n        this.views.push(item2);\r\n      });\r\n    });\r\n  }\r\n  copyCode() {\r\n    if (copy('http://baidu.com')) {\r\n      message.success(`复制成功,请赶快去painter粘贴代码查看效果`, 2);\r\n    } else {\r\n      message.error(`复制失败,请重试或者去谷歌浏览器尝试`, 2);\r\n    }\r\n  }\r\n  viewCode() {}\r\n  updateCanvasState() {\r\n    let that = this;\r\n    let canvas_sprite = this.canvas_sprite;\r\n    if (_config.undoStatus === false && _config.redoStatus === false) {\r\n      var jsonData = canvas_sprite.toJSON();\r\n      var canvasAsJson = JSON.stringify(jsonData);\r\n      if (_config.currentStateIndex < _config.canvasState.length - 1) {\r\n        var indexToBeInserted = _config.currentStateIndex + 1;\r\n        _config.canvasState[indexToBeInserted] = canvasAsJson;\r\n        var numberOfElementsToRetain = indexToBeInserted + 1;\r\n        _config.canvasState = _config.canvasState.splice(0, numberOfElementsToRetain);\r\n      } else {\r\n        _config.canvasState.push(canvasAsJson);\r\n      }\r\n      _config.currentStateIndex = _config.canvasState.length - 1;\r\n      if (_config.currentStateIndex === _config.canvasState.length - 1 && _config.currentStateIndex !== -1) {\r\n        that.setState({\r\n          redoButtonStatus: 'disabled'\r\n        });\r\n      }\r\n    }\r\n  }\r\n  handerUndo() {\r\n    let that = this;\r\n    let canvas_sprite = this.canvas_sprite;\r\n    if (_config.undoFinishedStatus) {\r\n      if (_config.currentStateIndex === -1) {\r\n        _config.undoStatus = false;\r\n      } else {\r\n        if (_config.canvasState.length >= 1) {\r\n          _config.undoFinishedStatus = 0;\r\n          if (_config.currentStateIndex !== 0) {\r\n            _config.undoStatus = true;\r\n            canvas_sprite.loadFromJSON(_config.canvasState[_config.currentStateIndex - 1], function() {\r\n              //var jsonData = JSON.parse(_config.canvasState[_config.currentStateIndex - 1]);\r\n              canvas_sprite.renderAll();\r\n              _config.undoStatus = false;\r\n              _config.currentStateIndex -= 1;\r\n              that.setState({\r\n                undoButtonStatus: ''\r\n              });\r\n              if (_config.currentStateIndex !== _config.canvasState.length - 1) {\r\n                that.setState({\r\n                  redoButtonStatus: ''\r\n                });\r\n              }\r\n              _config.undoFinishedStatus = 1;\r\n            });\r\n          } else if (_config.currentStateIndex === 0) {\r\n            canvas_sprite.clear();\r\n            _config.undoFinishedStatus = 1;\r\n            that.setState({\r\n              redoButtonStatus: '',\r\n              undoButtonStatus: 'disabled'\r\n            });\r\n            _config.currentStateIndex -= 1;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n  handerRedo() {\r\n    let that = this;\r\n    let canvas_sprite = this.canvas_sprite;\r\n    if (_config.redoFinishedStatus) {\r\n      if (_config.currentStateIndex === _config.canvasState.length - 1 && _config.currentStateIndex !== -1) {\r\n        that.setState({\r\n          redoButtonStatus: 'disabled'\r\n        });\r\n      } else {\r\n        if (_config.canvasState.length > _config.currentStateIndex && _config.canvasState.length !== 0) {\r\n          _config.redoFinishedStatus = 0;\r\n          _config.redoStatus = true;\r\n          canvas_sprite.loadFromJSON(_config.canvasState[_config.currentStateIndex + 1], function() {\r\n            //var jsonData = JSON.parse(_config.canvasState[_config.currentStateIndex + 1]);\r\n            canvas_sprite.renderAll();\r\n            _config.redoStatus = false;\r\n            _config.currentStateIndex += 1;\r\n            if (_config.currentStateIndex !== -1) {\r\n              that.setState({\r\n                undoButtonStatus: ''\r\n              });\r\n            }\r\n            _config.redoFinishedStatus = 1;\r\n            if (_config.currentStateIndex === _config.canvasState.length - 1 && _config.currentStateIndex !== -1) {\r\n              that.setState({\r\n                redoButtonStatus: 'disabled'\r\n              });\r\n            }\r\n          });\r\n        }\r\n      }\r\n    }\r\n  }\r\n  render() {\r\n    const currentOptionArr = this.currentOptionArr;\r\n    return (\r\n      <div id='main'>\r\n        <div className='slide'>\r\n          <canvas id='merge' width='700' height='1000' />\r\n        </div>\r\n        <div className='main-container'>\r\n          <div className='box'>\r\n            <div className='btns'>\r\n              <div className='btn'>\r\n                <Button type='primary' onClick={this.handerUndo}>\r\n                  Undo\r\n                </Button>\r\n              </div>\r\n              <div className='btn'>\r\n                <Button type='primary' onClick={this.handerRedo}>\r\n                  Redo\r\n                </Button>\r\n              </div>\r\n              <div className='btn'>\r\n                <Button type='primary' onClick={this.generateCode}>\r\n                  生成代码\r\n                </Button>\r\n              </div>\r\n              <div className='btn'>\r\n                <Button type='primary' onClick={this.copyCode}>\r\n                  复制代码\r\n                </Button>\r\n              </div>\r\n              <div className='btn'>\r\n                <Button type='primary' onClick={this.viewCode}>\r\n                  查看代码\r\n                </Button>\r\n              </div>\r\n            </div>\r\n            <div className='code' />\r\n          </div>\r\n          <div className='option'>\r\n            {optionArr.map((item, i) => {\r\n              if (i === 0) return null;\r\n              return (\r\n                <div key={i} className='option-li'>\r\n                  <div className='row'>\r\n                    <div className='h3'>{item.name} </div>\r\n                    <div className='btn'>\r\n                      <Button type='primary' onClick={this.addShape.bind(this, i)}>\r\n                        添加\r\n                      </Button>\r\n                    </div>\r\n                  </div>\r\n                  {Object.keys(item.css).map((item2, i2) => {\r\n                    return (\r\n                      <div className='row' key={i2}>\r\n                        <div className='h3'>{item2} </div>\r\n                        {!_.isArray(item.css[item2]) && (\r\n                          <Input\r\n                            //placeholder={item.css[item2]}\r\n                            defaultValue={item.css[item2]}\r\n                            onChange={event => {\r\n                              currentOptionArr[i].css[item2] = event.target.value;\r\n                            }}\r\n                          />\r\n                        )}\r\n                        {_.isArray(item.css[item2]) && (\r\n                          <Select\r\n                            defaultValue={item.css[item2][0]}\r\n                            style={{ width: 120 }}\r\n                            onChange={value => {\r\n                              currentOptionArr[i].css[item2] = value;\r\n                            }}\r\n                          >\r\n                            {item.css[item2].map((item3, i3) => {\r\n                              return (\r\n                                <Option value={item3} key={i3}>\r\n                                  {item3}\r\n                                </Option>\r\n                              );\r\n                            })}\r\n                          </Select>\r\n                        )}\r\n                      </div>\r\n                    );\r\n                  })}\r\n                </div>\r\n              );\r\n            })}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n//import { BrowserRouter as Router, Route, Link } from 'react-router-dom';\nimport './index.css';\nimport * as serviceWorker from './serviceWorker';\nimport App from './App'; // 导入App组件\n/* import About from './components/About'; // 导入About组件\nimport Inbox from './components/Inbox'; // 导入Inbox组件 */\n\nReactDOM.render(\n  <div>\n    <App />\n  </div>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}