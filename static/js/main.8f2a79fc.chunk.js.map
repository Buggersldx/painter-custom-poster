{"version":3,"sources":["serviceWorker.js","optionArr.js","App.js","index.js"],"names":["Boolean","window","location","hostname","match","optionArr","type","css","width","height","backgroundColor","name","text","lineHeight","color","top","left","background","fontSize","fontWeight","maxLines","textStyle","textAlign","textDecoration","borderRadius","borderWidth","borderColor","padding","rotate","shadow","fontFamily","url","mode","json","require","Option","Select","fabric","message","config","maxCount","QRErrorCorrectLevel","_config","canvasState","currentStateIndex","undoStatus","redoStatus","undoFinishedStatus","redoFinishedStatus","newOptionArr","_","cloneDeep","App","keydown","ALL_KEYS","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","showDrawer","setState","visible","onClose","handleSubmit","e","preventDefault","form","validateFields","err","values","console","log","addShape","bind","assertThisInitialized","generateCode","copyCode","viewCode","handerUndo","handerRedo","handerEditObject","state","redoButtonStatus","undoButtonStatus","activeObjectOptions","currentOptionArr","views","canvas_sprite","activeObject","Canvas","that","moveingFuc","throttle","_e$target","target","forEach","item","objectSpread","on","obj","currentHeight","canvas","currentWidth","setCoords","getBoundingRect","Math","max","min","options","updateCanvasState","event","which","set","remove","renderAll","index","addTextObject","Shape","addRectObject","addImageObject","addQrcodeObject","setActiveObject","add","fill","stroke","textBox","Textbox","textLines","length","element","Rect","rx","strokeWidth","angle","selectable","Group","mytype","w","scaleX","h","scaleY","originX","loadImageUrl","imgWidth","imgHeight","ry","oldScaleX","oldScaleY","clipPath","originY","imgBase64","jrQrcode","getQrBase64","correctLevel","reverse","foreground","lockUniScaling","imgUrl","Promise","resolve","Image","fromURL","oImg","updateRectObject","updateImageObject","updateQrcodeObject","rects","i","texts","_this2","getObjects","item2","view","concat","content","_objects","ele","push","finallObj","miniCode","plain","replace","copy","success","error","visibleCode","jsonData","toJSON","canvasAsJson","JSON","stringify","indexToBeInserted","numberOfElementsToRetain","splice","loadFromJSON","clear","_this3","_this$state","_react_16_9_0_react_default","a","createElement","id","className","es_button","onClick","map","key","keys","i2","isArray","input","defaultValue","onChange","value","es_select","style","item3","i3","icon","drawer","title","mask","updateObject","modal","onCancel","footer","react_markdown_default","source","React","Component","ReactDOM","render","src_App_0","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.8f2a79fc.chunk.js","sourcesContent":["// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","export default [\r\n  {\r\n    type: 'canvas',\r\n    css: {\r\n      width: '654',\r\n      height: '1000',\r\n      backgroundColor: '#f8f8f8'\r\n    }\r\n  },\r\n  {\r\n    type: 'text',\r\n    name: '文字',\r\n    css: {\r\n      text: ' 我是来测试的,请你不要打死我',\r\n      width: 200,\r\n      lineHeight: 1.5,\r\n      color: 'red',\r\n      top: 0,\r\n      left: 100,\r\n      background: 'rgba(0,0,0,0)',\r\n      fontSize: 30,\r\n      fontWeight: ['normal', 'bold'], //文字加粗 可以不写\r\n      maxLines: 2, //最大行数\r\n      textStyle: ['fill', 'stroke'], //fill： 填充样式，stroke：镂空样式\r\n      textAlign: ['left', 'center', 'right'], //文字的对齐方式，分为 left, center, right\r\n      textDecoration: ['none', 'overline', 'underline', 'linethrough'], //overline underline line-through 可组合\r\n      borderRadius: 1,\r\n      borderWidth: 1,\r\n      borderColor: '#000000',\r\n      padding: 0,\r\n      rotate: 0,\r\n      shadow: '10 10 5 #888888',\r\n      fontFamily: ''\r\n    }\r\n  },\r\n  {\r\n    type: 'rect',\r\n    name: '矩形',\r\n    css: {\r\n      background: '#ffffff', //文字区域背景色\r\n      top: 300,\r\n      left: 100,\r\n      width: 500,\r\n      height: 100, //高度,没有的话就自适应\r\n      rotate: 0,\r\n      borderRadius: 50,\r\n      borderWidth: 2,\r\n      borderColor: '#000000',\r\n      //align: ['center', 'left', 'right'], //view 的对齐方式\r\n      shadow: '10 10 5 #888888' //阴影\r\n    }\r\n  },\r\n  {\r\n    type: 'image',\r\n    name: '图片',\r\n    css: {\r\n      url: 'https://operate.maiyariji.com/20190709%2F3da002983292a6950a71ca7392a21827.jpg',\r\n      mode: ['scaleToFill', 'aspectFill', 'auto'],\r\n      top: 100,\r\n      left: 100,\r\n      width: 100,\r\n      height: 100, //高度,没有的话就自适应\r\n      rotate: 0,\r\n      borderRadius: 50,\r\n      borderWidth: 2,\r\n      borderColor: '#000000',\r\n      shadow: ''\r\n    }\r\n  },\r\n  {\r\n    type: 'qrcode',\r\n    name: '二维码',\r\n    css: {\r\n      url: '哈哈哈',\r\n      color: '#000000', //字体颜色 linear-gradient(-135deg, #fedcba 0%, rgba(18, 52, 86, 1) 20%, #987 80%)\r\n      background: '#ffffff', //文字区域背景色\r\n      top: 100,\r\n      left: 100,\r\n      width: 200,\r\n      rotate: 0\r\n      // borderRadius: 10,\r\n      // borderWidth: 2,\r\n      // borderColor: '#000000',\r\n      //align: ['center', 'left', 'right'], //view 的对齐方式\r\n      //padding: '3'\r\n    }\r\n  }\r\n];\r\n","import React from 'react';\r\nimport fabric from 'fabric';\r\nimport _ from 'lodash';\r\nimport jrQrcode from 'jr-qrcode';\r\nimport optionArr from './optionArr';\r\nimport './App.scss';\r\nimport { Button, Input, message, Select, Modal, Icon, Drawer } from 'antd';\r\nimport copy from 'copy-to-clipboard';\r\nimport keydown, { ALL_KEYS } from 'react-keydown';\r\nimport ReactMarkdown from 'react-markdown';\r\nvar json = require('format-json');\r\n\r\nfunction throttle(fn, threshhold) {\r\n  var timeout;\r\n  var start = new Date();\r\n  var threshhold = threshhold || 160;\r\n  return function() {\r\n    var context = this,\r\n      args = arguments,\r\n      curr = new Date() - 0;\r\n\r\n    clearTimeout(timeout); //总是干掉事件回调\r\n    if (curr - start >= threshhold) {\r\n      console.log('now', curr, curr - start); //注意这里相减的结果，都差不多是160左右\r\n      fn.apply(context, args); //只执行一部分方法，这些方法是在某个时间段内执行一次\r\n      start = curr;\r\n    } else {\r\n      //让方法在脱离事件后也能执行一次\r\n      timeout = setTimeout(function() {\r\n        fn.apply(context, args);\r\n      }, threshhold);\r\n    }\r\n  };\r\n}\r\n\r\nconst { Option } = Select;\r\nfabric = fabric.fabric;\r\nmessage.config({\r\n  maxCount: 1\r\n});\r\nlet QRErrorCorrectLevel = {\r\n  L: 1,\r\n  M: 0,\r\n  Q: 3,\r\n  H: 2\r\n};\r\nlet _config = {\r\n  canvasState: [],\r\n  currentStateIndex: -1,\r\n  undoStatus: false,\r\n  redoStatus: false,\r\n  undoFinishedStatus: 1,\r\n  redoFinishedStatus: 1\r\n};\r\n//得到当前默认信息\r\nlet newOptionArr = _.cloneDeep(optionArr);\r\nnewOptionArr[1].css.textStyle = newOptionArr[1].css.textStyle[0];\r\nnewOptionArr[1].css.textAlign = newOptionArr[1].css.textAlign[0];\r\nnewOptionArr[1].css.fontWeight = newOptionArr[1].css.fontWeight[0];\r\nnewOptionArr[1].css.textDecoration = newOptionArr[1].css.textDecoration[0];\r\n//newOptionArr[1].css.hasBorder = newOptionArr[1].css.hasBorder[0];\r\nnewOptionArr[3].css.mode = newOptionArr[3].css.mode[0];\r\nclass App extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.addShape = this.addShape.bind(this);\r\n    this.generateCode = this.generateCode.bind(this);\r\n    this.copyCode = this.copyCode.bind(this);\r\n    this.viewCode = this.viewCode.bind(this);\r\n    this.handerUndo = this.handerUndo.bind(this);\r\n    this.handerRedo = this.handerRedo.bind(this);\r\n    this.handerEditObject = this.handerEditObject.bind(this);\r\n    this.state = {\r\n      redoButtonStatus: '',\r\n      undoButtonStatus: '',\r\n      activeObjectOptions: {}, //当前编辑对象的配置\r\n      currentOptionArr: newOptionArr //当前可设置的数组的值\r\n    };\r\n    this.currentOptionArr = newOptionArr; //当前图像数据集合\r\n    this.views = []; //所有元素的信息\r\n    this.canvas_sprite = ''; //渲图片的canvas对象\r\n    this.height = 300; //固定死\r\n    this.width = 0; //通过实际宽高比计算出来的\r\n    this.activeObject = {};\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.canvas_sprite = new fabric.Canvas('merge', this.state.currentOptionArr[0].css);\r\n    let that = this;\r\n    let moveingFuc = _.throttle(function(e) {\r\n      let { top, left /* , width, height  */ } = e.target;\r\n      let currentOptionArr = _.cloneDeep(that.state.currentOptionArr);\r\n      currentOptionArr.forEach(item => {\r\n        item.css = {\r\n          ...item.css,\r\n          top: '' + top,\r\n          left: '' + left\r\n        };\r\n      });\r\n\r\n      that.setState({\r\n        currentOptionArr\r\n      });\r\n    }, 100);\r\n    this.canvas_sprite.on('object:moving', function(e) {\r\n      var obj = e.target;\r\n      // if object is too big ignore\r\n      if (obj.currentHeight > obj.canvas.height || obj.currentWidth > obj.canvas.width) {\r\n        return;\r\n      }\r\n      obj.setCoords();\r\n      // top-left  corner\r\n      if (obj.getBoundingRect().top < 0 || obj.getBoundingRect().left < 0) {\r\n        obj.top = Math.max(obj.top, obj.top - obj.getBoundingRect().top);\r\n        obj.left = Math.max(obj.left, obj.left - obj.getBoundingRect().left);\r\n      }\r\n      // bot-right corner\r\n      if (\r\n        obj.getBoundingRect().top + obj.getBoundingRect().height > obj.canvas.height ||\r\n        obj.getBoundingRect().left + obj.getBoundingRect().width > obj.canvas.width\r\n      ) {\r\n        obj.top = Math.min(\r\n          obj.top,\r\n          obj.canvas.height - obj.getBoundingRect().height + obj.top - obj.getBoundingRect().top\r\n        );\r\n        obj.left = Math.min(\r\n          obj.left,\r\n          obj.canvas.width - obj.getBoundingRect().width + obj.left - obj.getBoundingRect().left\r\n        );\r\n      }\r\n      moveingFuc(e);\r\n    });\r\n    this.canvas_sprite.on('object:scaling', function(e) {\r\n      var obj = e.target;\r\n      // if object is too big ignore\r\n      if (obj.currentHeight > obj.canvas.height || obj.currentWidth > obj.canvas.width) {\r\n        return;\r\n      }\r\n      obj.setCoords();\r\n      // top-left  corner\r\n      if (obj.getBoundingRect().top < 0 || obj.getBoundingRect().left < 0) {\r\n        obj.top = Math.max(obj.top, obj.top - obj.getBoundingRect().top);\r\n        obj.left = Math.max(obj.left, obj.left - obj.getBoundingRect().left);\r\n      }\r\n      // bot-right corner\r\n      if (\r\n        obj.getBoundingRect().top + obj.getBoundingRect().height > obj.canvas.height ||\r\n        obj.getBoundingRect().left + obj.getBoundingRect().width > obj.canvas.width\r\n      ) {\r\n        obj.top = Math.min(\r\n          obj.top,\r\n          obj.canvas.height - obj.getBoundingRect().height + obj.top - obj.getBoundingRect().top\r\n        );\r\n        obj.left = Math.min(\r\n          obj.left,\r\n          obj.canvas.width - obj.getBoundingRect().width + obj.left - obj.getBoundingRect().left\r\n        );\r\n      }\r\n      moveingFuc(e);\r\n    });\r\n    this.canvas_sprite.on('mouse:down', function(options) {\r\n      if (options.target) {\r\n        that.activeObject = options.target;\r\n        console.log('有对象被点击咯! ', options.target.type);\r\n        that.handerEditObject();\r\n      }\r\n    });\r\n    this.canvas_sprite.on('object:modified', function() {\r\n      that.updateCanvasState();\r\n    });\r\n\r\n    this.canvas_sprite.on('object:added', function() {\r\n      that.updateCanvasState();\r\n    });\r\n    this.addShape(1);\r\n    this.addShape(2);\r\n    this.addShape(3);\r\n    /* let canvas = this.canvas_sprite;\r\n    canvas.add(new fabric.Circle({ radius: 30, fill: '#f55', top: 100, left: 100 })); */\r\n  }\r\n  @keydown(ALL_KEYS)\r\n  beginEdit(event) {\r\n    let that = this;\r\n    if (that.activeObject) {\r\n      //console.log('that.activeObject', that.activeObject);\r\n      if (event.which === 37) {\r\n        //左\r\n        event.preventDefault();\r\n        that.activeObject.set({\r\n          left: that.activeObject.left - 1\r\n        });\r\n      } else if (event.which === 39) {\r\n        //右\r\n        event.preventDefault();\r\n        that.activeObject.set({\r\n          left: that.activeObject.left + 1\r\n        });\r\n      } else if (event.which === 40) {\r\n        //上\r\n        event.preventDefault();\r\n        that.activeObject.set({\r\n          top: that.activeObject.top + 1\r\n        });\r\n      } else if (event.which === 38) {\r\n        //下\r\n        event.preventDefault();\r\n        that.activeObject.set({\r\n          top: that.activeObject.top - 1\r\n        });\r\n      } else if (event.which === 90) {\r\n        //ctrl+z\r\n        event.preventDefault();\r\n        that.handerUndo();\r\n      } else if (event.which === 89) {\r\n        //ctrl+y\r\n        event.preventDefault();\r\n        that.handerRedo();\r\n      } else if (event.which === 46) {\r\n        //delete\r\n        event.preventDefault();\r\n        this.canvas_sprite.remove(that.activeObject);\r\n      }\r\n      this.canvas_sprite.renderAll();\r\n    }\r\n    //console.log('event', event.which);\r\n    // Start editing\r\n  }\r\n  async addShape(index) {\r\n    const currentOptionArr = this.state.currentOptionArr;\r\n    let { type } = currentOptionArr[index];\r\n    let Shape;\r\n    switch (type) {\r\n      case 'text':\r\n        Shape = await this.addTextObject(index);\r\n        break;\r\n      case 'rect':\r\n        Shape = await this.addRectObject(index);\r\n        break;\r\n      case 'image':\r\n        Shape = await this.addImageObject(index);\r\n        break;\r\n      case 'qrcode':\r\n        Shape = await this.addQrcodeObject(index);\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n    this.canvas_sprite.setActiveObject(Shape);\r\n    this.activeObject = Shape;\r\n    this.canvas_sprite.add(Shape);\r\n  }\r\n  async addTextObject(index) {\r\n    const that = this;\r\n    const currentOptionArr = this.state.currentOptionArr;\r\n    let { css } = currentOptionArr[index];\r\n    let {\r\n      width,\r\n      //height,\r\n      text,\r\n      color,\r\n      fontSize,\r\n      left,\r\n      top,\r\n      fontWeight,\r\n      fontFamily,\r\n      padding,\r\n      textDecoration,\r\n      borderRadius,\r\n      borderWidth,\r\n      borderColor,\r\n      rotate,\r\n      //align,\r\n      shadow,\r\n      lineHeight,\r\n      textAlign,\r\n      maxLines,\r\n      textStyle,\r\n      background\r\n    } = css;\r\n    width = width / 1;\r\n    left = left / 1;\r\n    top = top / 1;\r\n    borderRadius = borderRadius / 1;\r\n    borderWidth = borderWidth / 1;\r\n    rotate = rotate / 1;\r\n    fontSize = fontSize / 1;\r\n    maxLines = maxLines / 1;\r\n    padding = padding / 1;\r\n    lineHeight = lineHeight / 1.08; //和painter调试得出的值\r\n    let Shape;\r\n    let config = {\r\n      width: width / 1,\r\n      //height: height / 1,\r\n      fill: color,\r\n      fontWeight,\r\n      left: left, //距离画布左侧的距离，单位是像素\r\n      top /* : top + ((lineHeight - 1) * fontSize) / 2 */, //距离画布上边的距离\r\n      fontSize: fontSize / 1, //文字大小\r\n      fontFamily,\r\n      padding: padding / 1,\r\n      [textDecoration]: true,\r\n      //lockUniScaling: true, //只能等比缩放\r\n      textAlign,\r\n      textStyle,\r\n      shadow,\r\n      angle: rotate / 1,\r\n      splitByGrapheme: true, //文字换行\r\n      zIndex: 2,\r\n      lineHeight,\r\n      editable: true,\r\n      maxLines: maxLines / 1,\r\n      textDecoration: textDecoration,\r\n      lockScalingY: true\r\n    };\r\n    if (textStyle === 'stroke') {\r\n      config = {\r\n        ...config,\r\n        stroke: color,\r\n        fill: 'rgba(0,0,0)'\r\n      };\r\n    }\r\n    let textBox = new fabric.Textbox(text, config);\r\n    if (textBox.textLines.length > maxLines) {\r\n      let text = '';\r\n      for (let index = 0; index < maxLines; index++) {\r\n        const element = textBox.textLines[index];\r\n        if (index === maxLines - 1) {\r\n          text = text + element + '..';\r\n        } else {\r\n          text += element;\r\n        }\r\n      }\r\n      textBox.set({\r\n        text\r\n      });\r\n    }\r\n    let height = textBox.height / 1 + (textBox.lineHeight / 1 - 1) * textBox.fontSize + padding * 2;\r\n    width = textBox.width + padding * 2;\r\n    left = textBox.left - padding;\r\n    top = css.top - padding;\r\n    let Rect = new fabric.Rect({\r\n      width,\r\n      height,\r\n      left, //距离画布左侧的距离，单位是像素\r\n      top,\r\n      padding: padding / 1,\r\n      rx: borderRadius / 1,\r\n      //ry:borderRadius,\r\n      strokeWidth: borderWidth / 1,\r\n      stroke: borderColor,\r\n      fill: background,\r\n      angle: rotate,\r\n      shadow,\r\n      selectable: false\r\n    });\r\n    Shape = new fabric.Group([Rect, textBox], {\r\n      width,\r\n      height,\r\n      left, //距离画布左侧的距离，单位是像素\r\n      top,\r\n      angle: rotate,\r\n      mytype: 'textGroup'\r\n    });\r\n    Shape.on('scaling', function(e) {\r\n      let obj = this;\r\n      let width = obj.width;\r\n      let height = obj.height;\r\n      let w = obj.width * obj.scaleX;\r\n      let h = obj.height * obj.scaleY;\r\n      Rect.set({\r\n        left: -(w - width / 2),\r\n        top: -(h - height / 2),\r\n        height: h,\r\n        width: w,\r\n        rx: borderRadius,\r\n        strokeWidth: borderWidth\r\n      });\r\n      textBox.set({\r\n        left: -(w - width / 2),\r\n        top: -(h - height / 2),\r\n        width,\r\n        height,\r\n        fontSize,\r\n        scaleX: 1,\r\n        scaleY: 1\r\n      });\r\n      obj.set({\r\n        height: h,\r\n        width: w,\r\n        scaleX: 1,\r\n        scaleY: 1,\r\n        originX: 'left'\r\n      });\r\n\r\n      that.canvas_sprite.renderAll();\r\n    });\r\n    return Shape;\r\n  }\r\n  async addRectObject(index) {\r\n    const currentOptionArr = this.state.currentOptionArr;\r\n    let { css } = currentOptionArr[index];\r\n    let {\r\n      width,\r\n      height,\r\n      left,\r\n      top,\r\n      borderRadius,\r\n      borderWidth,\r\n      borderColor,\r\n      background,\r\n      rotate,\r\n      //align,\r\n      shadow\r\n    } = css;\r\n    width = width / 1;\r\n    height = height / 1;\r\n    left = left / 1;\r\n    top = top / 1;\r\n    borderRadius = borderRadius / 1;\r\n    borderWidth = borderWidth / 1;\r\n    rotate = rotate / 1;\r\n    let Shape = new fabric.Rect({\r\n      width,\r\n      height,\r\n      left,\r\n      top,\r\n      rx: borderRadius,\r\n      //ry:borderRadius,\r\n      strokeWidth: borderWidth,\r\n      stroke: borderColor,\r\n      fill: background,\r\n      //align,\r\n      rotate,\r\n      shadow,\r\n      mytype: 'rect'\r\n    });\r\n    return Shape;\r\n  }\r\n  async addImageObject(index) {\r\n    const currentOptionArr = this.state.currentOptionArr;\r\n    let { css } = currentOptionArr[index];\r\n    let {\r\n      width,\r\n      height,\r\n      left,\r\n      top,\r\n      borderRadius,\r\n      borderWidth,\r\n      borderColor,\r\n      background,\r\n      rotate,\r\n      //align,\r\n      shadow,\r\n      mode,\r\n      url\r\n    } = css;\r\n    width = width / 1;\r\n    height = height / 1;\r\n    left = left / 1;\r\n    top = top / 1;\r\n    borderRadius = borderRadius / 1;\r\n    borderWidth = borderWidth / 1;\r\n    rotate = rotate / 1;\r\n\r\n    let Shape = await this.loadImageUrl(url);\r\n    let imgWidth = Shape.width;\r\n    let imgHeight = Shape.height;\r\n\r\n    Shape.set({\r\n      url,\r\n      left: left / 1,\r\n      top: top / 1,\r\n      rx: borderRadius / 1,\r\n      ry: borderRadius / 1,\r\n      strokeWidth: borderWidth / 1,\r\n      stroke: borderColor,\r\n      backgroundColor: background,\r\n      //align,\r\n      angle: rotate / 1,\r\n      mode,\r\n      shadow,\r\n      mytype: 'image'\r\n    });\r\n\r\n    if (mode === 'scaleToFill') {\r\n      Shape.set({\r\n        width: imgWidth,\r\n        height: imgHeight,\r\n        scaleX: width / imgWidth,\r\n        scaleY: height / imgHeight,\r\n        oldScaleX: width / imgWidth,\r\n        oldScaleY: height / imgHeight\r\n      });\r\n      Shape.clipPath = new fabric.Rect({\r\n        width,\r\n        height,\r\n        originX: 'center',\r\n        originY: 'center',\r\n        rx: borderRadius,\r\n        angle: rotate / 1,\r\n        scaleX: imgWidth / width,\r\n        scaleY: imgHeight / height\r\n      });\r\n    } else if (mode === 'auto') {\r\n      //忽略高度会自适应宽度,等比缩放图片\r\n      Shape.set({\r\n        width: imgWidth,\r\n        height: imgHeight,\r\n        scaleX: width / imgWidth,\r\n        scaleY: width / imgWidth,\r\n        oldScaleX: width / imgWidth,\r\n        oldScaleY: height / imgHeight\r\n      });\r\n      Shape.clipPath = new fabric.Rect({\r\n        width,\r\n        height,\r\n        originX: 'center',\r\n        originY: 'center',\r\n        rx: borderRadius,\r\n        angle: rotate / 1,\r\n        scaleX: imgWidth / width,\r\n        scaleY: imgHeight / height\r\n      });\r\n    } else if (mode === 'aspectFill') {\r\n      Shape.clipPath = new fabric.Rect({\r\n        width: width / 1,\r\n        height: height / 1,\r\n        originX: 'center',\r\n        originY: 'center',\r\n        rx: borderRadius / 1,\r\n        angle: rotate / 1\r\n      });\r\n      Shape.set({\r\n        width,\r\n        height\r\n      });\r\n    }\r\n\r\n    return Shape;\r\n  }\r\n  async addQrcodeObject(index) {\r\n    const currentOptionArr = this.state.currentOptionArr;\r\n    let { css } = currentOptionArr[index];\r\n    let {\r\n      width,\r\n      left,\r\n      top,\r\n      color,\r\n      /* borderRadius,\r\n      borderWidth,\r\n      borderColor, */\r\n      background,\r\n      rotate,\r\n      url\r\n      //align,\r\n    } = css;\r\n    width = width / 1;\r\n    left = left / 1;\r\n    top = top / 1;\r\n    rotate = rotate / 1;\r\n    let imgBase64 = jrQrcode.getQrBase64(url, {\r\n      padding: 0, // 二维码四边空白（默认为10px）\r\n      width: width / 1, // 二维码图片宽度（默认为256px）\r\n      height: width / 1, // 二维码图片高度（默认为256px）\r\n      correctLevel: QRErrorCorrectLevel.H, // 二维码容错level（默认为高）\r\n      reverse: false, // 反色二维码，二维码颜色为上层容器的背景颜色\r\n      background: background, // 二维码背景颜色（默认白色）\r\n      foreground: color // 二维码颜色（默认黑色）\r\n    });\r\n    let Shape = await this.loadImageUrl(imgBase64);\r\n    Shape.set({\r\n      url,\r\n      width: width / 1,\r\n      height: width / 1,\r\n      left: left / 1,\r\n      top: top / 1,\r\n      /* rx: borderRadius / 1,\r\n      strokeWidth: borderWidth / 1,\r\n      stroke: borderColor, */\r\n      //align,\r\n      angle: rotate / 1,\r\n      lockUniScaling: true, //只能等比缩放\r\n      mytype: 'qrcode'\r\n    });\r\n\r\n    return Shape;\r\n  }\r\n  loadImageUrl(imgUrl) {\r\n    return new Promise(resolve => {\r\n      fabric.Image.fromURL(imgUrl, function(oImg) {\r\n        //console.log('Shape', oImg);\r\n        resolve(oImg);\r\n      });\r\n    });\r\n  }\r\n  updateObject() {\r\n    let type = this.activeObject.mytype;\r\n    switch (type) {\r\n      case 'textGroup':\r\n        this.canvas_sprite.remove(this.activeObject);\r\n        this.addShape(1);\r\n        break;\r\n      case 'rect':\r\n        this.updateRectObject(2);\r\n        break;\r\n      case 'image':\r\n        this.updateImageObject(3);\r\n        break;\r\n      case 'qrcode':\r\n        this.updateQrcodeObject(4);\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n    this.canvas_sprite.renderAll();\r\n  }\r\n  updateRectObject(index) {\r\n    const currentOptionArr = this.state.currentOptionArr;\r\n    let { css } = currentOptionArr[2];\r\n    let {\r\n      width,\r\n      height,\r\n      left,\r\n      top,\r\n      borderRadius,\r\n      borderWidth,\r\n      borderColor,\r\n      background,\r\n      rotate,\r\n      //align,\r\n      shadow\r\n    } = css;\r\n    width = width / 1;\r\n    height = height / 1;\r\n    left = left / 1;\r\n    top = top / 1;\r\n    borderRadius = borderRadius / 1;\r\n    borderWidth = borderWidth / 1;\r\n    rotate = rotate / 1;\r\n    this.activeObject.set({\r\n      width,\r\n      height,\r\n      left,\r\n      top,\r\n      rx: borderRadius,\r\n      //ry:borderRadius,\r\n      strokeWidth: borderWidth,\r\n      stroke: borderColor,\r\n      fill: background,\r\n      //align,\r\n      rotate,\r\n      shadow,\r\n      mytype: 'rect'\r\n    });\r\n  }\r\n  updateImageObject(index) {\r\n    const currentOptionArr = this.state.currentOptionArr;\r\n    let { css } = currentOptionArr[index];\r\n    let {\r\n      width,\r\n      height,\r\n      left,\r\n      top,\r\n      borderRadius,\r\n      borderWidth,\r\n      borderColor,\r\n      background,\r\n      rotate,\r\n      //align,\r\n      shadow,\r\n      mode,\r\n      url\r\n    } = css;\r\n    width = width / 1;\r\n    height = height / 1;\r\n    left = left / 1;\r\n    top = top / 1;\r\n    borderRadius = borderRadius / 1;\r\n    borderWidth = borderWidth / 1;\r\n    rotate = rotate / 1;\r\n\r\n    let Shape = this.activeObject;\r\n    let imgWidth = Shape.width;\r\n    let imgHeight = Shape.height;\r\n\r\n    Shape.set({\r\n      url,\r\n      left: left / 1,\r\n      top: top / 1,\r\n      rx: borderRadius / 1,\r\n      ry: borderRadius / 1,\r\n      strokeWidth: borderWidth / 1,\r\n      stroke: borderColor,\r\n      backgroundColor: background,\r\n      //align,\r\n      angle: rotate / 1,\r\n      mode,\r\n      shadow,\r\n      mytype: 'image'\r\n    });\r\n\r\n    if (mode === 'scaleToFill') {\r\n      Shape.set({\r\n        width: imgWidth,\r\n        height: imgHeight,\r\n        scaleX: width / imgWidth,\r\n        scaleY: height / imgHeight,\r\n        oldScaleX: width / imgWidth,\r\n        oldScaleY: height / imgHeight\r\n      });\r\n      Shape.clipPath = new fabric.Rect({\r\n        width,\r\n        height,\r\n        originX: 'center',\r\n        originY: 'center',\r\n        rx: borderRadius,\r\n        angle: rotate / 1,\r\n        scaleX: imgWidth / width,\r\n        scaleY: imgHeight / height\r\n      });\r\n    } else if (mode === 'auto') {\r\n      //忽略高度会自适应宽度,等比缩放图片\r\n      Shape.set({\r\n        width: imgWidth,\r\n        height: imgHeight,\r\n        scaleX: width / imgWidth,\r\n        scaleY: width / imgWidth,\r\n        oldScaleX: width / imgWidth,\r\n        oldScaleY: height / imgHeight\r\n      });\r\n      Shape.clipPath = new fabric.Rect({\r\n        width,\r\n        height,\r\n        originX: 'center',\r\n        originY: 'center',\r\n        rx: borderRadius,\r\n        angle: rotate / 1,\r\n        scaleX: imgWidth / width,\r\n        scaleY: imgHeight / height\r\n      });\r\n    } else if (mode === 'aspectFill') {\r\n      Shape.clipPath = new fabric.Rect({\r\n        width: width / 1,\r\n        height: height / 1,\r\n        originX: 'center',\r\n        originY: 'center',\r\n        rx: borderRadius / 1,\r\n        angle: rotate / 1\r\n      });\r\n      Shape.set({\r\n        width,\r\n        height\r\n      });\r\n    }\r\n  }\r\n  updateQrcodeObject(index) {\r\n    const currentOptionArr = this.state.currentOptionArr;\r\n    let { css } = currentOptionArr[index];\r\n    let {\r\n      width,\r\n      left,\r\n      top,\r\n      //color,\r\n      /* borderRadius,\r\n      borderWidth,\r\n      borderColor, */\r\n      //background,\r\n      rotate,\r\n      url\r\n      //align,\r\n    } = css;\r\n    width = width / 1;\r\n    left = left / 1;\r\n    top = top / 1;\r\n    rotate = rotate / 1;\r\n    let Shape = this.activeObject;\r\n    Shape.set({\r\n      url,\r\n      width: width / 1,\r\n      height: width / 1,\r\n      left: left / 1,\r\n      top: top / 1,\r\n      /* rx: borderRadius / 1,\r\n      strokeWidth: borderWidth / 1,\r\n      stroke: borderColor, */\r\n      //align,\r\n      angle: rotate / 1,\r\n      lockUniScaling: true, //只能等比缩放\r\n      mytype: 'qrcode'\r\n    });\r\n  }\r\n  clearCanvas() {\r\n    this.rects.forEach(function(item, i) {\r\n      item.remove();\r\n    });\r\n    this.texts.forEach(function(item, i) {\r\n      item.remove();\r\n    });\r\n  }\r\n  generateCode() {\r\n    let canvas_sprite = this.canvas_sprite;\r\n    this.views = [];\r\n    canvas_sprite.getObjects().forEach((item2, index) => {\r\n      let view = {};\r\n      //let oldScaleX = item2.oldScaleX || 1;\r\n      let oldScaleY = item2.oldScaleY || 1;\r\n      let css = {\r\n        color: `${item2.color}`,\r\n        background: `${item2.fill}`,\r\n        width: `${item2.width * item2.scaleX}px`,\r\n        height: `${item2.height * item2.scaleY}px`,\r\n        top: `${item2.top}px`,\r\n        left: `${item2.left}px`,\r\n        rotate: `${item2.angle}`,\r\n        borderRadius: `${item2.rx * (item2.scaleY / oldScaleY)}px`,\r\n        borderWidth: `${item2.strokeWidth}px`,\r\n        borderColor: `${item2.stroke}`,\r\n        //align: `${item2.align}`,\r\n        shadow: `${item2.shadow}`\r\n      };\r\n      //console.log('canvas_sprite.toObject(item2)', canvas_sprite.toObject(item2));\r\n\r\n      let type = item2.mytype;\r\n      if (type === 'image') {\r\n        delete css.color;\r\n        delete css.background;\r\n        view = {\r\n          type,\r\n          url: `${item2.url}`,\r\n          css: {\r\n            ...css,\r\n            mode: `${item2.mode}`\r\n          }\r\n        };\r\n      } else if (type === 'qrcode') {\r\n        delete css.color;\r\n        delete css.background;\r\n        delete css.borderRadius;\r\n        delete css.borderWidth;\r\n        delete css.borderColor;\r\n        delete css.shadow;\r\n        view = {\r\n          type,\r\n          content: `${item2.url}`,\r\n          css: {\r\n            ...css /* ,\r\n              padding: `${item2.padding}rpx` */\r\n          }\r\n        };\r\n      } /*  else if (type === 'textbox') {\r\n          delete css.borderRadius;\r\n          delete css.borderWidth;\r\n          delete css.borderColor;\r\n          view = {\r\n            type: 'text',\r\n            text: `${item2.text}`,\r\n            css: {\r\n              ...css,\r\n              color: item2.fill,\r\n              padding: `${item2.padding}px`,\r\n              fontSize: `${item2.fontSize}px`,\r\n              fontWeight: `${item2.fontWeight}`,\r\n              maxLines: `${item2.maxLines}`,\r\n              lineHeight: `${(item2.lineHeight / 1) * item2.fontSize}px`,\r\n              textStyle: `${item2.textStyle}`,\r\n              textDecoration: `${item2.textDecoration}`,\r\n              fontFamily: `${item2.fontFamily}`,\r\n              textAlign: `${item2.textAlign}`\r\n            }\r\n          };\r\n        }  */ else if (\r\n        type === 'textGroup'\r\n      ) {\r\n        item2._objects.forEach(ele => {\r\n          if (ele.type === 'rect') {\r\n            view = {\r\n              ...view,\r\n              type: 'text',\r\n              css: {\r\n                ...css,\r\n                ...view.css,\r\n                left: `${item2.left + ele.padding}px`,\r\n                top: `${item2.top + ele.padding + ele.strokeWidth}px`,\r\n                color: `${ele.backgroundColor}`,\r\n                borderRadius: `${ele.rx}px`,\r\n                borderWidth: `${ele.strokeWidth}px`,\r\n                borderColor: `${ele.stroke}`\r\n              }\r\n            };\r\n          } else {\r\n            view = {\r\n              ...view,\r\n              type: 'text',\r\n              text: `${ele.text}`,\r\n              css: {\r\n                ...css,\r\n                ...view.css,\r\n                width: `${ele.width}px`,\r\n                height: `${ele.height}px`,\r\n                color: ele.fill,\r\n                padding: `${ele.padding}px`,\r\n                fontSize: `${ele.fontSize}px`,\r\n                fontWeight: `${ele.fontWeight}`,\r\n                maxLines: `${ele.maxLines}`,\r\n                lineHeight: `${ele.lineHeight * 1.08 * ele.fontSize}px`,\r\n                textStyle: `${ele.textStyle}`,\r\n                textDecoration: `${ele.textDecoration === 'linethrough' ? 'line-through' : ele.textDecoration}`,\r\n                fontFamily: `${ele.fontFamily}`,\r\n                textAlign: `${ele.textAlign}`,\r\n                shadow: `${ele.shadow}`\r\n              }\r\n            };\r\n          }\r\n        });\r\n      } else if (type === 'rect') {\r\n        delete css.color;\r\n        if (item2.strokeWidth === 0) {\r\n          delete css.borderWidth;\r\n          delete css.borderColor;\r\n        }\r\n        view = {\r\n          type,\r\n          css: {\r\n            ...css,\r\n            color: item2.fill\r\n          }\r\n        };\r\n      }\r\n      this.views.push(view);\r\n    });\r\n    this.finallObj = {\r\n      width: `${canvas_sprite.width}px`,\r\n      height: `${canvas_sprite.height}px`,\r\n      background: canvas_sprite.backgroundColor,\r\n      views: this.views\r\n    };\r\n    this.miniCode = `\r\n    export default class LastMayday {\r\n      palette() {\r\n        return (\r\n${json.plain(this.finallObj).replace(/px/g, 'px')}\r\n        );\r\n      }\r\n    }\r\n    `;\r\n    console.log('finallObj', json.plain(this.finallObj).replace(/px/g, 'rpx'));\r\n  }\r\n  copyCode() {\r\n    this.generateCode();\r\n    if (copy(this.miniCode)) {\r\n      message.success(`复制成功,请赶快去painter粘贴代码查看效果`, 2);\r\n    } else {\r\n      message.error(`复制失败,请重试或者去谷歌浏览器尝试`, 2);\r\n    }\r\n  }\r\n  viewCode() {\r\n    this.generateCode();\r\n    this.setState({\r\n      visibleCode: true\r\n    });\r\n  }\r\n  updateCanvasState() {\r\n    let that = this;\r\n    let canvas_sprite = this.canvas_sprite;\r\n    if (_config.undoStatus === false && _config.redoStatus === false) {\r\n      var jsonData = canvas_sprite.toJSON();\r\n      var canvasAsJson = JSON.stringify(jsonData);\r\n      if (_config.currentStateIndex < _config.canvasState.length - 1) {\r\n        var indexToBeInserted = _config.currentStateIndex + 1;\r\n        _config.canvasState[indexToBeInserted] = canvasAsJson;\r\n        var numberOfElementsToRetain = indexToBeInserted + 1;\r\n        _config.canvasState = _config.canvasState.splice(0, numberOfElementsToRetain);\r\n      } else {\r\n        _config.canvasState.push(canvasAsJson);\r\n      }\r\n      _config.currentStateIndex = _config.canvasState.length - 1;\r\n      if (_config.currentStateIndex === _config.canvasState.length - 1 && _config.currentStateIndex !== -1) {\r\n        that.setState({\r\n          redoButtonStatus: 'disabled'\r\n        });\r\n      }\r\n    }\r\n  }\r\n  handerUndo() {\r\n    let that = this;\r\n    let canvas_sprite = this.canvas_sprite;\r\n    if (_config.undoFinishedStatus) {\r\n      if (_config.currentStateIndex === -1) {\r\n        _config.undoStatus = false;\r\n      } else {\r\n        if (_config.canvasState.length >= 1) {\r\n          _config.undoFinishedStatus = 0;\r\n          if (_config.currentStateIndex !== 0) {\r\n            _config.undoStatus = true;\r\n            canvas_sprite.loadFromJSON(_config.canvasState[_config.currentStateIndex - 1], function() {\r\n              //var jsonData = JSON.parse(_config.canvasState[_config.currentStateIndex - 1]);\r\n              canvas_sprite.renderAll();\r\n              _config.undoStatus = false;\r\n              _config.currentStateIndex -= 1;\r\n              that.setState({\r\n                undoButtonStatus: ''\r\n              });\r\n              if (_config.currentStateIndex !== _config.canvasState.length - 1) {\r\n                that.setState({\r\n                  redoButtonStatus: ''\r\n                });\r\n              }\r\n              _config.undoFinishedStatus = 1;\r\n            });\r\n          } else if (_config.currentStateIndex === 0) {\r\n            canvas_sprite.clear();\r\n            _config.undoFinishedStatus = 1;\r\n            that.setState({\r\n              redoButtonStatus: '',\r\n              undoButtonStatus: 'disabled'\r\n            });\r\n            _config.currentStateIndex -= 1;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n  handerRedo() {\r\n    let that = this;\r\n    let canvas_sprite = this.canvas_sprite;\r\n    if (_config.redoFinishedStatus) {\r\n      if (_config.currentStateIndex === _config.canvasState.length - 1 && _config.currentStateIndex !== -1) {\r\n        that.setState({\r\n          redoButtonStatus: 'disabled'\r\n        });\r\n      } else {\r\n        if (_config.canvasState.length > _config.currentStateIndex && _config.canvasState.length !== 0) {\r\n          _config.redoFinishedStatus = 0;\r\n          _config.redoStatus = true;\r\n          canvas_sprite.loadFromJSON(_config.canvasState[_config.currentStateIndex + 1], function() {\r\n            //var jsonData = JSON.parse(_config.canvasState[_config.currentStateIndex + 1]);\r\n            canvas_sprite.renderAll();\r\n            _config.redoStatus = false;\r\n            _config.currentStateIndex += 1;\r\n            if (_config.currentStateIndex !== -1) {\r\n              that.setState({\r\n                undoButtonStatus: ''\r\n              });\r\n            }\r\n            _config.redoFinishedStatus = 1;\r\n            if (_config.currentStateIndex === _config.canvasState.length - 1 && _config.currentStateIndex !== -1) {\r\n              that.setState({\r\n                redoButtonStatus: 'disabled'\r\n              });\r\n            }\r\n          });\r\n        }\r\n      }\r\n    }\r\n  }\r\n  handerEditObject() {\r\n    //let canvas_sprite = this.canvas_sprite;\r\n    //this.activeObject = canvas_sprite.getActiveObject();\r\n    this.showDrawer();\r\n    let type = this.activeObject.mytype;\r\n    let item2 = this.activeObject;\r\n    //let oldScaleX = item2.oldScaleX || 1;\r\n    let oldScaleY = item2.oldScaleY || 1;\r\n    let css = {\r\n      color: `${item2.color}`,\r\n      background: `${item2.fill}`,\r\n      width: `${item2.width * item2.scaleX}`,\r\n      height: `${item2.height * item2.scaleY}`,\r\n      top: `${item2.top}`,\r\n      left: `${item2.left}`,\r\n      rotate: `${item2.angle}`,\r\n      borderRadius: `${item2.rx * (item2.scaleY / oldScaleY)}`,\r\n      borderWidth: `${item2.strokeWidth}`,\r\n      borderColor: `${item2.stroke}`,\r\n      //align: `${item2.align}`,\r\n      shadow: `${item2.shadow}`\r\n    };\r\n    let index = '';\r\n    switch (type) {\r\n      case 'textGroup':\r\n        index = 1;\r\n        item2._objects.forEach(ele => {\r\n          if (ele.type === 'rect') {\r\n            css = {\r\n              ...css,\r\n              background: `${ele.backgroundColor}`,\r\n              borderRadius: `${ele.rx}`,\r\n              borderWidth: `${ele.strokeWidth}`,\r\n              borderColor: `${ele.stroke}`\r\n            };\r\n          } else {\r\n            css = {\r\n              ...css,\r\n              background: `${ele.backgroundColor}`,\r\n              borderRadius: `${ele.rx}`,\r\n              borderWidth: `${ele.strokeWidth}`,\r\n              borderColor: `${ele.stroke}`,\r\n              color: ele.fill,\r\n              padding: `${ele.padding}`,\r\n              fontSize: `${ele.fontSize}`,\r\n              fontWeight: `${ele.fontWeight}`,\r\n              maxLines: `${ele.maxLines}`,\r\n              lineHeight: `${ele.lineHeight}`,\r\n              textStyle: `${ele.textStyle}`,\r\n              textDecoration: `${ele.textDecoration === 'linethrough' ? 'line-through' : ele.textDecoration}`,\r\n              fontFamily: `${ele.fontFamily}`,\r\n              textAlign: `${ele.textAlign}`,\r\n              shadow: `${ele.shadow}`\r\n            };\r\n          }\r\n        });\r\n        break;\r\n      case 'rect':\r\n        index = 2;\r\n        delete css.color;\r\n        css = {\r\n          ...css\r\n        };\r\n        break;\r\n      case 'image':\r\n        index = 3;\r\n        delete css.color;\r\n        delete css.background;\r\n        css = {\r\n          url: item2.url,\r\n          ...css,\r\n          mode: `${item2.mode}`\r\n        };\r\n        break;\r\n      case 'qrcode':\r\n        index = 4;\r\n        delete css.color;\r\n        delete css.background;\r\n        delete css.borderRadius;\r\n        delete css.borderWidth;\r\n        delete css.borderColor;\r\n        delete css.shadow;\r\n        css = {\r\n          url: item2.url,\r\n          ...css\r\n        };\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n    let currentOptionArr = _.cloneDeep(this.state.currentOptionArr);\r\n    currentOptionArr[index].css = css;\r\n    this.setState({\r\n      currentOptionArr\r\n    });\r\n  }\r\n  showDrawer = () => {\r\n    this.setState({\r\n      visible: true\r\n    });\r\n  };\r\n\r\n  onClose = () => {\r\n    this.setState({\r\n      visible: false\r\n    });\r\n  };\r\n  handleSubmit = e => {\r\n    e.preventDefault();\r\n    this.props.form.validateFields((err, values) => {\r\n      if (!err) {\r\n        console.log('Received values of form: ', values);\r\n      }\r\n    });\r\n  };\r\n  render() {\r\n    const { visible, visibleCode, currentOptionArr } = this.state;\r\n    return (\r\n      <div id='main'>\r\n        <div className='slide'>\r\n          <canvas id='merge' width='700' height='1000' />\r\n        </div>\r\n        <div className='main-container'>\r\n          <div className='box'>\r\n            <div className='btns'>\r\n              <div className='btn'>\r\n                <Button type='primary' onClick={this.handerUndo}>\r\n                  Undo\r\n                </Button>\r\n              </div>\r\n              <div className='btn'>\r\n                <Button type='primary' onClick={this.handerRedo}>\r\n                  Redo\r\n                </Button>\r\n              </div>\r\n              <div className='btn'>\r\n                <Button type='primary' onClick={this.handerEditObject}>\r\n                  编辑对象\r\n                </Button>\r\n              </div>\r\n              <div className='btn'>\r\n                <Button type='primary' onClick={this.copyCode}>\r\n                  复制代码\r\n                </Button>\r\n              </div>\r\n              <div className='btn'>\r\n                <Button type='primary' onClick={this.viewCode}>\r\n                  查看代码\r\n                </Button>\r\n              </div>\r\n            </div>\r\n            <div className='code' />\r\n          </div>\r\n          <div className='option'>\r\n            {optionArr.map((item, i) => {\r\n              if (i === 0) return null;\r\n              return (\r\n                <div key={i} className='option-li'>\r\n                  <div className='row'>\r\n                    <div className='h3'>{item.name} </div>\r\n                    <div className='btn'>\r\n                      <Button type='primary' onClick={this.addShape.bind(this, i)}>\r\n                        添加\r\n                      </Button>\r\n                    </div>\r\n                  </div>\r\n                  {Object.keys(item.css).map((item2, i2) => {\r\n                    return (\r\n                      <div className='row' key={i2}>\r\n                        <div className='h3'>{item2} </div>\r\n                        {!_.isArray(item.css[item2]) && (\r\n                          <Input\r\n                            defaultValue={item.css[item2]}\r\n                            onChange={event => {\r\n                              currentOptionArr[i].css[item2] = event.target.value;\r\n                            }}\r\n                          />\r\n                        )}\r\n                        {_.isArray(item.css[item2]) && (\r\n                          <Select\r\n                            defaultValue={item.css[item2][0]}\r\n                            style={{ width: 120 }}\r\n                            onChange={value => {\r\n                              currentOptionArr[i].css[item2] = value;\r\n                            }}\r\n                          >\r\n                            {item.css[item2].map((item3, i3) => {\r\n                              return (\r\n                                <Option value={item3} key={i3}>\r\n                                  {item3}\r\n                                </Option>\r\n                              );\r\n                            })}\r\n                          </Select>\r\n                        )}\r\n                      </div>\r\n                    );\r\n                  })}\r\n                </div>\r\n              );\r\n            })}\r\n          </div>\r\n        </div>\r\n        {\r\n          <div className='edit-modal'>\r\n            <div>\r\n              <Button type='primary' onClick={this.showDrawer}>\r\n                <Icon type='plus' /> New account\r\n              </Button>\r\n              <Drawer title='编辑对象' width={400} onClose={this.onClose} visible={visible} mask={false}>\r\n                {currentOptionArr.map((item, i) => {\r\n                  let type = this.activeObject.mytype;\r\n                  if (type === 'textGroup') {\r\n                    type = 'text';\r\n                  }\r\n                  console.log('this.activeObject.mytype', this.activeObject.mytype);\r\n\r\n                  if (item.type === type) {\r\n                    return (\r\n                      <div key={i} className='option-li'>\r\n                        <div className='row'>\r\n                          <div className='h3'>{item.name} </div>\r\n                        </div>\r\n                        {Object.keys(item.css).map((item2, i2) => {\r\n                          return (\r\n                            <div className='row' key={i2}>\r\n                              <div className='h3'>{item2} </div>\r\n                              {!_.isArray(optionArr[i].css[item2]) && (\r\n                                <Input\r\n                                  defaultValue={item.css[item2]}\r\n                                  value={item.css[item2]}\r\n                                  onChange={event => {\r\n                                    let currentOptionArr = _.cloneDeep(this.state.currentOptionArr);\r\n                                    currentOptionArr[i].css[item2] = event.target.value;\r\n                                    this.setState({\r\n                                      currentOptionArr\r\n                                    });\r\n                                    this.updateObject();\r\n                                  }}\r\n                                />\r\n                              )}\r\n                              {_.isArray(optionArr[i].css[item2]) && (\r\n                                <Select\r\n                                  defaultValue={item.css[item2]}\r\n                                  value={item.css[item2]}\r\n                                  style={{ width: 120 }}\r\n                                  onChange={value => {\r\n                                    let currentOptionArr = _.cloneDeep(this.state.currentOptionArr);\r\n                                    currentOptionArr[i].css[item2] = value;\r\n                                    this.setState({\r\n                                      currentOptionArr\r\n                                    });\r\n                                    this.updateObject();\r\n                                  }}\r\n                                >\r\n                                  {optionArr[i].css[item2].map((item3, i3) => {\r\n                                    return (\r\n                                      <Option value={item3} key={i3}>\r\n                                        {item3}\r\n                                      </Option>\r\n                                    );\r\n                                  })}\r\n                                </Select>\r\n                              )}\r\n                            </div>\r\n                          );\r\n                        })}\r\n                      </div>\r\n                    );\r\n                  }\r\n                })}\r\n              </Drawer>\r\n            </div>\r\n          </div>\r\n        }\r\n        <Modal\r\n          title='view code'\r\n          visible={visibleCode}\r\n          onCancel={() => {\r\n            this.setState({\r\n              visibleCode: false\r\n            });\r\n          }}\r\n          footer={[\r\n            <Button key='submit' type='primary' onClick={this.copyCode}>\r\n              复制代码\r\n            </Button>\r\n          ]}\r\n        >\r\n          <ReactMarkdown\r\n            source={`\\`\\`\\`\r\n${this.miniCode}\r\n          `}\r\n          />\r\n        </Modal>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\n//import { BrowserRouter as Router, Route, Link } from 'react-router-dom';\r\nimport './index.css';\r\nimport * as serviceWorker from './serviceWorker';\r\nimport App from './App'; // 导入App组件\r\n/* import About from './components/About'; // 导入About组件\r\nimport Inbox from './components/Inbox'; // 导入Inbox组件 */\r\n\r\nReactDOM.render(\r\n  <div>\r\n    <App />\r\n  </div>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}