{"version":3,"sources":["gradient.js","serviceWorker.js","optionArr.js","example/example.js","App.js","index.js"],"names":["api","isGradient","bg","startsWith","doGradient","width","height","ctx","param","coordinate","direction","match","parseFloat","x1","y1","x2","y2","Math","tan","PI","sin","analizeLinear","content","colorPer","analizeGrad","substring","indexOf","colorStops","i","colors","length","percents","type","linearEffect","r1","r2","radialEffect","string","colorPercents","split","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","colorPercent","value","push","lastIndexOf","trim","err","return","module","exports","Boolean","window","location","hostname","optionArr","name","css","backgroundColor","text","lineHeight","color","top","left","background","fontSize","fontWeight","maxLines","textStyle","textAlign","textDecoration","borderRadius","borderWidth","borderColor","padding","rotate","shadow","fontFamily","url","mode","newOptionArr","_","cloneDeep","example","src","json","version","objects","originX","originY","fill","stroke","strokeWidth","strokeDashArray","strokeLineCap","strokeDashOffset","strokeLineJoin","strokeMiterLimit","scaleX","scaleY","angle","flipX","flipY","opacity","visible","clipTo","fillRule","paintFirst","globalCompositeOperation","transformMatrix","skewX","skewY","blur","offsetX","offsetY","affectStroke","nonScaling","rx","ry","fontStyle","underline","overline","linethrough","textBackgroundColor","charSpacing","minWidth","splitByGrapheme","styles","mytype","oldText","GD","require","Option","Select","TextArea","Input","fabric","message","config","maxCount","QRErrorCorrectLevel","_config","canvasState","currentStateIndex","undoStatus","redoStatus","undoFinishedStatus","redoFinishedStatus","App","keydown","ALL_KEYS","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","onClose","setState","addShape","bind","assertThisInitialized","generateCode","copyCode","viewCode","exportCode","importCode","handerUndo","handerRedo","changeActiveObjectValue","confirmImportCode","state","redoButtonStatus","undoButtonStatus","currentOptionArr","currentObjectType","importCodeJson","views","canvas_sprite","activeObject","Canvas","addEventListener","that","throttlechangeActiveObjectValue","throttle","on","e","obj","target","currentHeight","canvas","currentWidth","setCoords","getBoundingRect","max","min","updateObject","updateCanvasState","event","which","preventDefault","set","remove","renderAll","index","action","addTextObject","Shape","addRectObject","addImageObject","addQrcodeObject","setActiveObject","add","objectSpread","textBox","Textbox","toObject","util","object","extend","textLines","element","Rect","selectable","gradientOption","setGradient","Group","lockScalingY","centeredRotation","w","h","group","myshadow","lockUniScaling","rect","loadImageUrl","imgWidth","imgHeight","oldScaleX","oldScaleY","clipPath","imgBase64","jrQrcode","getQrBase64","correctLevel","reverse","foreground","imgUrl","Promise","resolve","Image","fromURL","oImg","item2","concat","toFixed","_objects","forEach","ele","_this2","getObjects","view","finallObj","miniCode","plain","replace","rects","item","texts","copy","success","error","visibleCode","visibleImportCode","_this3","delay","ms","clearTimeout","delayT","setTimeout","loadFromJSON","asyncToGenerator","regenerator_default","a","mark","_callee6","Objects","wrap","_context6","prev","stop","jsonData","toJSON","canvasAsJson","JSON","stringify","indexToBeInserted","numberOfElementsToRetain","splice","clear","_this4","_this$state","_react_16_9_0_react_default","createElement","id","className","es_button","onClick","es_radio","onChange","map","Button","key","keys","i2","isArray","input","defaultValue","setWidth","setHeight","setBackgroundColor","es_select","style","item3","i3","exampleData","alt","drawer","title","mask","placement","modal","onCancel","footer","react_markdown_default","source","placeholder","autosize","minRows","maxRows","React","Component","ReactDOM","render","src_App_0","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.497a60b2.chunk.js","sourcesContent":["/* eslint-disable */\r\n// 当ctx传入当前文件，const grd = ctx.createCircularGradient() 和\r\n// const grd = this.ctx.createLinearGradient() 无效，因此只能分开处理\r\n// 先分析，在外部创建grd，再传入使用就可以\r\n\r\n!(function() {\r\n  var api = {\r\n    isGradient: function(bg) {\r\n      if (bg && (bg.startsWith('linear') || bg.startsWith('radial'))) {\r\n        return true;\r\n      }\r\n      return false;\r\n    },\r\n\r\n    doGradient: function(bg, width, height) {\r\n      if (bg.startsWith('linear')) {\r\n        return linearEffect(width, height, bg);\r\n      } else if (bg.startsWith('radial')) {\r\n        return radialEffect(width, height, bg);\r\n      }\r\n    }\r\n  };\r\n\r\n  function analizeGrad(string) {\r\n    const colorPercents = string.substring(0, string.length - 1).split('%,');\r\n    const colors = [];\r\n    const percents = [];\r\n    for (let colorPercent of colorPercents) {\r\n      colors.push(colorPercent.substring(0, colorPercent.lastIndexOf(' ')).trim());\r\n      percents.push(colorPercent.substring(colorPercent.lastIndexOf(' '), colorPercent.length) / 100);\r\n    }\r\n    return { colors: colors, percents: percents };\r\n  }\r\n\r\n  function radialEffect(width, height, bg, ctx) {\r\n    const colorPer = analizeGrad(bg.match(/radial-gradient\\((.+)\\)/)[1]);\r\n    //const grd = ctx.createCircularGradient(0, 0, width < height ? height / 2 : width / 2);\r\n    let colorStops = {};\r\n    for (let i = 0; i < colorPer.colors.length; i++) {\r\n      //grd.addColorStop(colorPer.percents[i], colorPer.colors[i]);\r\n      colorStops[colorPer.percents[i]] = colorPer.colors[i];\r\n    }\r\n    //ctx.setFillStyle(grd);\r\n    //ctx.fillRect(-(width / 2), -(height / 2), width, height);\r\n\r\n    return {\r\n      type: 'radial',\r\n      x1: 0 + width / 2,\r\n      y1: 0 + height / 2,\r\n      r1: 0,\r\n      x2: 0 + width / 2,\r\n      y2: 0 + height / 2,\r\n      r2: width < height ? height / 2 : width / 2,\r\n      colorStops\r\n    };\r\n  }\r\n\r\n  function analizeLinear(bg, width, height) {\r\n    const direction = bg.match(/([-]?\\d{1,3})deg/);\r\n    const dir = direction && direction[1] ? parseFloat(direction[1]) : 0;\r\n    let coordinate;\r\n    switch (dir) {\r\n      case 0:\r\n        coordinate = [0, -height / 2, 0, height / 2];\r\n        break;\r\n      case 90:\r\n        coordinate = [width / 2, 0, -width / 2, 0];\r\n        break;\r\n      case -90:\r\n        coordinate = [-width / 2, 0, width / 2, 0];\r\n        break;\r\n      case 180:\r\n        coordinate = [0, height / 2, 0, -height / 2];\r\n        break;\r\n      case -180:\r\n        coordinate = [0, -height / 2, 0, height / 2];\r\n        break;\r\n      default:\r\n        let x1 = 0;\r\n        let y1 = 0;\r\n        let x2 = 0;\r\n        let y2 = 0;\r\n        if (direction[1] > 0 && direction[1] < 90) {\r\n          x1 =\r\n            width / 2 -\r\n            (((width / 2) * Math.tan(((90 - direction[1]) * Math.PI * 2) / 360) - height / 2) *\r\n              Math.sin((2 * (90 - direction[1]) * Math.PI * 2) / 360)) /\r\n              2;\r\n          y2 = Math.tan(((90 - direction[1]) * Math.PI * 2) / 360) * x1;\r\n          x2 = -x1;\r\n          y1 = -y2;\r\n        } else if (direction[1] > -180 && direction[1] < -90) {\r\n          x1 =\r\n            -(width / 2) +\r\n            (((width / 2) * Math.tan(((90 - direction[1]) * Math.PI * 2) / 360) - height / 2) *\r\n              Math.sin((2 * (90 - direction[1]) * Math.PI * 2) / 360)) /\r\n              2;\r\n          y2 = Math.tan(((90 - direction[1]) * Math.PI * 2) / 360) * x1;\r\n          x2 = -x1;\r\n          y1 = -y2;\r\n        } else if (direction[1] > 90 && direction[1] < 180) {\r\n          x1 =\r\n            width / 2 +\r\n            ((-(width / 2) * Math.tan(((90 - direction[1]) * Math.PI * 2) / 360) - height / 2) *\r\n              Math.sin((2 * (90 - direction[1]) * Math.PI * 2) / 360)) /\r\n              2;\r\n          y2 = Math.tan(((90 - direction[1]) * Math.PI * 2) / 360) * x1;\r\n          x2 = -x1;\r\n          y1 = -y2;\r\n        } else {\r\n          x1 =\r\n            -(width / 2) -\r\n            ((-(width / 2) * Math.tan(((90 - direction[1]) * Math.PI * 2) / 360) - height / 2) *\r\n              Math.sin((2 * (90 - direction[1]) * Math.PI * 2) / 360)) /\r\n              2;\r\n          y2 = Math.tan(((90 - direction[1]) * Math.PI * 2) / 360) * x1;\r\n          x2 = -x1;\r\n          y1 = -y2;\r\n        }\r\n        coordinate = [x1, y1, x2, y2];\r\n        break;\r\n    }\r\n    return coordinate;\r\n  }\r\n\r\n  function linearEffect(width, height, bg, ctx) {\r\n    const param = analizeLinear(bg, width, height);\r\n    //const grd = ctx.createLinearGradient(param[0], param[1], param[2], param[3]);\r\n    const content = bg.match(/linear-gradient\\((.+)\\)/)[1];\r\n    const colorPer = analizeGrad(content.substring(content.indexOf(',') + 1));\r\n    let colorStops = {};\r\n    for (let i = 0; i < colorPer.colors.length; i++) {\r\n      //grd.addColorStop(colorPer.percents[i], colorPer.colors[i]);\r\n      colorStops[colorPer.percents[i]] = colorPer.colors[i];\r\n    }\r\n    //ctx.setFillStyle(grd);\r\n    //ctx.fillRect(-(width / 2), -(height / 2), width, height);\r\n    return {\r\n      type: 'linear',\r\n      x1: param[0] + width / 2,\r\n      y1: param[1] + height / 2,\r\n      x2: param[2] + width / 2,\r\n      y2: param[3] + height / 2,\r\n      colorStops\r\n    };\r\n  }\r\n  module.exports = { api };\r\n})();\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import _ from 'lodash';\r\nlet optionArr = [\r\n  {\r\n    type: 'canvas',\r\n    name: '画布',\r\n    css: {\r\n      width: '654',\r\n      height: '1000',\r\n      backgroundColor: '#f8f8f8'\r\n    }\r\n  },\r\n  {\r\n    type: 'text',\r\n    name: '文字',\r\n    css: {\r\n      text: '别跟我谈感情，谈感情伤钱。',\r\n      width: 200,\r\n      lineHeight: 1.5,\r\n      color: 'red',\r\n      top: 0,\r\n      left: 0,\r\n      background: 'rgba(0,0,0,0)',\r\n      fontSize: 30,\r\n      fontWeight: ['normal', 'bold'], //文字加粗 可以不写\r\n      maxLines: 2, //最大行数\r\n      textStyle: ['fill', 'stroke'], //fill： 填充样式，stroke：镂空样式\r\n      textAlign: ['left', 'center', 'right'], //文字的对齐方式，分为 left, center, right\r\n      textDecoration: ['none', 'overline', 'underline', 'linethrough'], //overline underline line-through 可组合\r\n      borderRadius: 1,\r\n      borderWidth: 1,\r\n      borderColor: '#000000',\r\n      padding: 0,\r\n      rotate: 0,\r\n      shadow: '10 10 5 #888888',\r\n      fontFamily: '' //webfont\r\n    }\r\n  },\r\n  {\r\n    type: 'rect',\r\n    name: '矩形',\r\n    css: {\r\n      //background: 'linear-gradient(280deg, #fedcba 0%, rgba(18, 52, 86, 1) 20%, #987 80%)',\r\n      //background: 'radial-gradient(rgba(0, 0, 0, 0) 5%, #0ff 15%, #f0f 60%)',\r\n      background: '#fff',\r\n      top: 0,\r\n      left: 0,\r\n      width: 200,\r\n      height: 100, //高度,没有的话就自适应\r\n      rotate: 0,\r\n      borderRadius: 25,\r\n      borderWidth: 2,\r\n      borderColor: '#000000',\r\n      //align: ['center', 'left', 'right'], //view 的对齐方式\r\n      shadow: '10 10 5 #888888' //阴影\r\n    }\r\n  },\r\n  {\r\n    type: 'image',\r\n    name: '图片',\r\n    css: {\r\n      url: 'https://operate.maiyariji.com/20190709%2F3da002983292a6950a71ca7392a21827.jpg',\r\n      mode: ['scaleToFill', 'aspectFill', 'auto'],\r\n      top: 0,\r\n      left: 0,\r\n      width: 100,\r\n      height: 100, //高度,没有的话就自适应\r\n      rotate: 0,\r\n      borderRadius: 50,\r\n      borderWidth: 2,\r\n      borderColor: '#000000',\r\n      shadow: ''\r\n    }\r\n  },\r\n  {\r\n    type: 'qrcode',\r\n    name: '二维码',\r\n    css: {\r\n      url: '哈哈哈',\r\n      color: '#000000', //字体颜色 linear-gradient(-135deg, #fedcba 0%, rgba(18, 52, 86, 1) 20%, #987 80%)\r\n      background: '#ffffff', //文字区域背景色\r\n      top: 10,\r\n      left: 300,\r\n      width: 200,\r\n      rotate: 0,\r\n      borderRadius: 10/* ,\r\n      borderWidth: 0,\r\n      borderColor: '#000000', */\r\n      //align: ['center', 'left', 'right'], //view 的对齐方式\r\n      //padding: '3'\r\n    }\r\n  }\r\n];\r\n\r\n//得到当前默认信息\r\nlet newOptionArr = _.cloneDeep(optionArr);\r\nnewOptionArr[1].css.textStyle = newOptionArr[1].css.textStyle[0];\r\nnewOptionArr[1].css.textAlign = newOptionArr[1].css.textAlign[0];\r\nnewOptionArr[1].css.fontWeight = newOptionArr[1].css.fontWeight[0];\r\nnewOptionArr[1].css.textDecoration = newOptionArr[1].css.textDecoration[0];\r\nnewOptionArr[3].css.mode = newOptionArr[3].css.mode[0];\r\nexport { optionArr, newOptionArr };\r\n","export default [\r\n  {\r\n    src: '',\r\n    json: {\r\n      version: '3.4.0',\r\n      objects: [\r\n        {\r\n          type: 'group',\r\n          version: '3.4.0',\r\n          originX: 'center',\r\n          originY: 'center',\r\n          left: 131,\r\n          top: 325.32,\r\n          width: 204,\r\n          height: 94.65,\r\n          fill: 'rgb(0,0,0)',\r\n          stroke: null,\r\n          strokeWidth: 0,\r\n          strokeDashArray: null,\r\n          strokeLineCap: 'butt',\r\n          strokeDashOffset: 0,\r\n          strokeLineJoin: 'miter',\r\n          strokeMiterLimit: 4,\r\n          scaleX: 1,\r\n          scaleY: 1,\r\n          angle: 0,\r\n          flipX: false,\r\n          flipY: false,\r\n          opacity: 1,\r\n          shadow: null,\r\n          visible: true,\r\n          clipTo: null,\r\n          backgroundColor: '',\r\n          fillRule: 'nonzero',\r\n          paintFirst: 'fill',\r\n          globalCompositeOperation: 'source-over',\r\n          transformMatrix: null,\r\n          skewX: 0,\r\n          skewY: 0,\r\n          objects: [\r\n            {\r\n              type: 'rect',\r\n              version: '3.4.0',\r\n              originX: 'left',\r\n              originY: 'top',\r\n              left: -102.5,\r\n              top: -47.82,\r\n              width: 204,\r\n              height: 94.65,\r\n              fill: 'rgba(0,0,0,0)',\r\n              stroke: '#000000',\r\n              strokeWidth: 1,\r\n              strokeDashArray: null,\r\n              strokeLineCap: 'butt',\r\n              strokeDashOffset: 0,\r\n              strokeLineJoin: 'miter',\r\n              strokeMiterLimit: 4,\r\n              scaleX: 1,\r\n              scaleY: 1,\r\n              angle: 0,\r\n              flipX: false,\r\n              flipY: false,\r\n              opacity: 1,\r\n              shadow: { color: '#888888', blur: 5, offsetX: 10, offsetY: 10, affectStroke: false, nonScaling: false },\r\n              visible: true,\r\n              clipTo: null,\r\n              backgroundColor: '',\r\n              fillRule: 'nonzero',\r\n              paintFirst: 'fill',\r\n              globalCompositeOperation: 'source-over',\r\n              transformMatrix: null,\r\n              skewX: 0,\r\n              skewY: 0,\r\n              rx: 1,\r\n              ry: 1\r\n            },\r\n            {\r\n              type: 'textbox',\r\n              version: '3.4.0',\r\n              originX: 'left',\r\n              originY: 'top',\r\n              left: -102.5,\r\n              top: -47.82,\r\n              width: 202,\r\n              height: 80.98,\r\n              fill: 'red',\r\n              stroke: null,\r\n              strokeWidth: 1,\r\n              strokeDashArray: null,\r\n              strokeLineCap: 'butt',\r\n              strokeDashOffset: 0,\r\n              strokeLineJoin: 'miter',\r\n              strokeMiterLimit: 4,\r\n              scaleX: 1,\r\n              scaleY: 1,\r\n              angle: 0,\r\n              flipX: false,\r\n              flipY: false,\r\n              opacity: 1,\r\n              shadow: { color: '#888888', blur: 5, offsetX: 10, offsetY: 10, affectStroke: false, nonScaling: false },\r\n              visible: true,\r\n              clipTo: null,\r\n              backgroundColor: '',\r\n              fillRule: 'nonzero',\r\n              paintFirst: 'fill',\r\n              globalCompositeOperation: 'source-over',\r\n              transformMatrix: null,\r\n              skewX: 0,\r\n              skewY: 0,\r\n              text: '别跟我谈感情，谈感情伤钱...',\r\n              fontSize: 30,\r\n              fontWeight: 'normal',\r\n              fontFamily: 'webfont',\r\n              fontStyle: 'normal',\r\n              lineHeight: 1.3888888888888888,\r\n              underline: false,\r\n              overline: false,\r\n              linethrough: false,\r\n              textAlign: 'left',\r\n              textBackgroundColor: '',\r\n              charSpacing: 0,\r\n              minWidth: 20,\r\n              splitByGrapheme: true,\r\n              styles: {},\r\n              maxLines: 2,\r\n              textDecoration: 'none',\r\n              textStyle: 'fill'\r\n            }\r\n          ],\r\n          mytype: 'textGroup',\r\n          oldText: '别跟我谈感情，谈感情伤钱。'\r\n        },\r\n        {\r\n          type: 'group',\r\n          version: '3.4.0',\r\n          originX: 'center',\r\n          originY: 'center',\r\n          left: 552,\r\n          top: 344.32,\r\n          width: 204,\r\n          height: 94.65,\r\n          fill: 'rgb(0,0,0)',\r\n          stroke: null,\r\n          strokeWidth: 0,\r\n          strokeDashArray: null,\r\n          strokeLineCap: 'butt',\r\n          strokeDashOffset: 0,\r\n          strokeLineJoin: 'miter',\r\n          strokeMiterLimit: 4,\r\n          scaleX: 1,\r\n          scaleY: 1,\r\n          angle: 0,\r\n          flipX: false,\r\n          flipY: false,\r\n          opacity: 1,\r\n          shadow: null,\r\n          visible: true,\r\n          clipTo: null,\r\n          backgroundColor: '',\r\n          fillRule: 'nonzero',\r\n          paintFirst: 'fill',\r\n          globalCompositeOperation: 'source-over',\r\n          transformMatrix: null,\r\n          skewX: 0,\r\n          skewY: 0,\r\n          objects: [\r\n            {\r\n              type: 'rect',\r\n              version: '3.4.0',\r\n              originX: 'left',\r\n              originY: 'top',\r\n              left: -102.5,\r\n              top: -47.82,\r\n              width: 204,\r\n              height: 94.65,\r\n              fill: 'rgba(0,0,0,0)',\r\n              stroke: '#000000',\r\n              strokeWidth: 1,\r\n              strokeDashArray: null,\r\n              strokeLineCap: 'butt',\r\n              strokeDashOffset: 0,\r\n              strokeLineJoin: 'miter',\r\n              strokeMiterLimit: 4,\r\n              scaleX: 1,\r\n              scaleY: 1,\r\n              angle: 0,\r\n              flipX: false,\r\n              flipY: false,\r\n              opacity: 1,\r\n              shadow: { color: '#888888', blur: 5, offsetX: 10, offsetY: 10, affectStroke: false, nonScaling: false },\r\n              visible: true,\r\n              clipTo: null,\r\n              backgroundColor: '',\r\n              fillRule: 'nonzero',\r\n              paintFirst: 'fill',\r\n              globalCompositeOperation: 'source-over',\r\n              transformMatrix: null,\r\n              skewX: 0,\r\n              skewY: 0,\r\n              rx: 1,\r\n              ry: 1\r\n            },\r\n            {\r\n              type: 'textbox',\r\n              version: '3.4.0',\r\n              originX: 'left',\r\n              originY: 'top',\r\n              left: -102.5,\r\n              top: -47.82,\r\n              width: 202,\r\n              height: 80.98,\r\n              fill: 'red',\r\n              stroke: null,\r\n              strokeWidth: 1,\r\n              strokeDashArray: null,\r\n              strokeLineCap: 'butt',\r\n              strokeDashOffset: 0,\r\n              strokeLineJoin: 'miter',\r\n              strokeMiterLimit: 4,\r\n              scaleX: 1,\r\n              scaleY: 1,\r\n              angle: 0,\r\n              flipX: false,\r\n              flipY: false,\r\n              opacity: 1,\r\n              shadow: { color: '#888888', blur: 5, offsetX: 10, offsetY: 10, affectStroke: false, nonScaling: false },\r\n              visible: true,\r\n              clipTo: null,\r\n              backgroundColor: '',\r\n              fillRule: 'nonzero',\r\n              paintFirst: 'fill',\r\n              globalCompositeOperation: 'source-over',\r\n              transformMatrix: null,\r\n              skewX: 0,\r\n              skewY: 0,\r\n              text: '别跟我谈感情，谈感情伤钱...',\r\n              fontSize: 30,\r\n              fontWeight: 'normal',\r\n              fontFamily: 'webfont',\r\n              fontStyle: 'normal',\r\n              lineHeight: 1.3888888888888888,\r\n              underline: false,\r\n              overline: false,\r\n              linethrough: false,\r\n              textAlign: 'left',\r\n              textBackgroundColor: '',\r\n              charSpacing: 0,\r\n              minWidth: 20,\r\n              splitByGrapheme: true,\r\n              styles: {},\r\n              maxLines: 2,\r\n              textDecoration: 'none',\r\n              textStyle: 'fill'\r\n            }\r\n          ],\r\n          mytype: 'textGroup',\r\n          oldText: '别跟我谈感情，谈感情伤钱。'\r\n        },\r\n        {\r\n          type: 'group',\r\n          version: '3.4.0',\r\n          originX: 'center',\r\n          originY: 'center',\r\n          left: 323,\r\n          top: 151.32,\r\n          width: 204,\r\n          height: 94.65,\r\n          fill: 'rgb(0,0,0)',\r\n          stroke: null,\r\n          strokeWidth: 0,\r\n          strokeDashArray: null,\r\n          strokeLineCap: 'butt',\r\n          strokeDashOffset: 0,\r\n          strokeLineJoin: 'miter',\r\n          strokeMiterLimit: 4,\r\n          scaleX: 1,\r\n          scaleY: 1,\r\n          angle: 0,\r\n          flipX: false,\r\n          flipY: false,\r\n          opacity: 1,\r\n          shadow: null,\r\n          visible: true,\r\n          clipTo: null,\r\n          backgroundColor: '',\r\n          fillRule: 'nonzero',\r\n          paintFirst: 'fill',\r\n          globalCompositeOperation: 'source-over',\r\n          transformMatrix: null,\r\n          skewX: 0,\r\n          skewY: 0,\r\n          objects: [\r\n            {\r\n              type: 'rect',\r\n              version: '3.4.0',\r\n              originX: 'left',\r\n              originY: 'top',\r\n              left: -102.5,\r\n              top: -47.82,\r\n              width: 204,\r\n              height: 94.65,\r\n              fill: 'rgba(0,0,0,0)',\r\n              stroke: '#000000',\r\n              strokeWidth: 1,\r\n              strokeDashArray: null,\r\n              strokeLineCap: 'butt',\r\n              strokeDashOffset: 0,\r\n              strokeLineJoin: 'miter',\r\n              strokeMiterLimit: 4,\r\n              scaleX: 1,\r\n              scaleY: 1,\r\n              angle: 0,\r\n              flipX: false,\r\n              flipY: false,\r\n              opacity: 1,\r\n              shadow: { color: '#888888', blur: 5, offsetX: 10, offsetY: 10, affectStroke: false, nonScaling: false },\r\n              visible: true,\r\n              clipTo: null,\r\n              backgroundColor: '',\r\n              fillRule: 'nonzero',\r\n              paintFirst: 'fill',\r\n              globalCompositeOperation: 'source-over',\r\n              transformMatrix: null,\r\n              skewX: 0,\r\n              skewY: 0,\r\n              rx: 1,\r\n              ry: 1\r\n            },\r\n            {\r\n              type: 'textbox',\r\n              version: '3.4.0',\r\n              originX: 'left',\r\n              originY: 'top',\r\n              left: -102.5,\r\n              top: -47.82,\r\n              width: 202,\r\n              height: 80.98,\r\n              fill: 'red',\r\n              stroke: null,\r\n              strokeWidth: 1,\r\n              strokeDashArray: null,\r\n              strokeLineCap: 'butt',\r\n              strokeDashOffset: 0,\r\n              strokeLineJoin: 'miter',\r\n              strokeMiterLimit: 4,\r\n              scaleX: 1,\r\n              scaleY: 1,\r\n              angle: 0,\r\n              flipX: false,\r\n              flipY: false,\r\n              opacity: 1,\r\n              shadow: { color: '#888888', blur: 5, offsetX: 10, offsetY: 10, affectStroke: false, nonScaling: false },\r\n              visible: true,\r\n              clipTo: null,\r\n              backgroundColor: '',\r\n              fillRule: 'nonzero',\r\n              paintFirst: 'fill',\r\n              globalCompositeOperation: 'source-over',\r\n              transformMatrix: null,\r\n              skewX: 0,\r\n              skewY: 0,\r\n              text: '别跟我谈感情，谈感情伤钱...',\r\n              fontSize: 30,\r\n              fontWeight: 'normal',\r\n              fontFamily: 'webfont',\r\n              fontStyle: 'normal',\r\n              lineHeight: 1.3888888888888888,\r\n              underline: false,\r\n              overline: false,\r\n              linethrough: false,\r\n              textAlign: 'left',\r\n              textBackgroundColor: '',\r\n              charSpacing: 0,\r\n              minWidth: 20,\r\n              splitByGrapheme: true,\r\n              styles: {},\r\n              maxLines: 2,\r\n              textDecoration: 'none',\r\n              textStyle: 'fill'\r\n            }\r\n          ],\r\n          mytype: 'textGroup',\r\n          oldText: '别跟我谈感情，谈感情伤钱。'\r\n        }\r\n      ],\r\n      background: '#f8f8f8'\r\n    }\r\n  }\r\n];\r\n","import React from 'react';\r\nimport fabric from 'fabric';\r\nimport _ from 'lodash';\r\nimport jrQrcode from 'jr-qrcode';\r\nimport { Button, Input, message, Select, Modal, Drawer, Radio } from 'antd';\r\nimport copy from 'copy-to-clipboard';\r\nimport keydown, { ALL_KEYS } from 'react-keydown';\r\nimport ReactMarkdown from 'react-markdown';\r\nimport json from 'format-json';\r\nimport { optionArr, newOptionArr } from './optionArr';\r\nimport './App.scss';\r\nimport exampleData from './example/example';\r\n//import importCodeJson from './importCodeJson';\r\n//var FontFaceObserver = require('fontfaceobserver');\r\nconst GD = require('./gradient.js');\r\nconst { Option } = Select;\r\nconst { TextArea } = Input;\r\nfabric = fabric.fabric;\r\nmessage.config({\r\n  maxCount: 1\r\n});\r\n\r\nlet QRErrorCorrectLevel = {\r\n  L: 1,\r\n  M: 0,\r\n  Q: 3,\r\n  H: 2\r\n};\r\nlet _config = {\r\n  canvasState: [],\r\n  currentStateIndex: -1,\r\n  undoStatus: false,\r\n  redoStatus: false,\r\n  undoFinishedStatus: 1,\r\n  redoFinishedStatus: 1\r\n};\r\n\r\nclass App extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.addShape = this.addShape.bind(this);\r\n    this.generateCode = this.generateCode.bind(this);\r\n    this.copyCode = this.copyCode.bind(this);\r\n    this.viewCode = this.viewCode.bind(this);\r\n    this.exportCode = this.exportCode.bind(this);\r\n    this.importCode = this.importCode.bind(this);\r\n    this.handerUndo = this.handerUndo.bind(this);\r\n    this.handerRedo = this.handerRedo.bind(this);\r\n    this.changeActiveObjectValue = this.changeActiveObjectValue.bind(this);\r\n    this.confirmImportCode = this.confirmImportCode.bind(this);\r\n    this.state = {\r\n      redoButtonStatus: '',\r\n      undoButtonStatus: '',\r\n      currentOptionArr: newOptionArr, //当前可设置的数组的值\r\n      currentObjectType: 'text', //当前要添加对象的类型\r\n      importCodeJson: ''\r\n    };\r\n    this.currentOptionArr = newOptionArr; //当前图像数据集合\r\n    this.views = []; //所有元素的信息\r\n    this.canvas_sprite = ''; //渲图片的canvas对象\r\n    this.height = 300; //固定死\r\n    this.width = 0; //通过实际宽高比计算出来的\r\n    this.activeObject = {};\r\n    this.importCodeJson = '' /* importCodeJson */;\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.canvas_sprite = new fabric.Canvas('merge', this.state.currentOptionArr[0].css);\r\n    /* var font = new FontFaceObserver('webfont');\r\n    font.load(); */\r\n    //this.confirmImportCode();\r\n    this.addEventListener();\r\n    this.addShape(1);\r\n    /* this.addShape(1);\r\n    this.addShape(2);\r\n    this.addShape(3);\r\n    this.addShape(4); */\r\n    /* let canvas = this.canvas_sprite;\r\n    canvas.add(new fabric.Circle({ radius: 30, fill: '#f55', top: 100, left: 100 })); */\r\n    /* let rect = new fabric.Rect({\r\n      width: 200,\r\n      height: 100,\r\n      left: 0,\r\n      top: 0,\r\n      fill: '#000'\r\n    });\r\n    let background = 'linear-gradient(280deg, #fedcba 0%, rgba(18, 52, 86, 1) 20%, #987 80%)';\r\n    this.canvas_sprite.add(rect);\r\n    let gradientOption = '';\r\n    if (GD.api.isGradient(background)) {\r\n      gradientOption = GD.api.doGradient(background, 200, 100);\r\n    }\r\n\r\n    rect.setGradient('fill', gradientOption); */\r\n  }\r\n  addEventListener() {\r\n    let that = this;\r\n    let throttlechangeActiveObjectValue = _.throttle(that.changeActiveObjectValue, 100);\r\n    this.canvas_sprite.on('object:moving', function(e) {\r\n      var obj = e.target;\r\n      // if object is too big ignore\r\n      if (obj.currentHeight > obj.canvas.height || obj.currentWidth > obj.canvas.width) {\r\n        return;\r\n      }\r\n      obj.setCoords();\r\n      // top-left  corner\r\n      if (obj.getBoundingRect().top < 0 || obj.getBoundingRect().left < 0) {\r\n        obj.top = Math.max(obj.top, obj.top - obj.getBoundingRect().top);\r\n        obj.left = Math.max(obj.left, obj.left - obj.getBoundingRect().left);\r\n      }\r\n      // bot-right corner\r\n      if (\r\n        obj.getBoundingRect().top + obj.getBoundingRect().height > obj.canvas.height ||\r\n        obj.getBoundingRect().left + obj.getBoundingRect().width > obj.canvas.width\r\n      ) {\r\n        obj.top = Math.min(\r\n          obj.top,\r\n          obj.canvas.height - obj.getBoundingRect().height + obj.top - obj.getBoundingRect().top\r\n        );\r\n        obj.left = Math.min(\r\n          obj.left,\r\n          obj.canvas.width - obj.getBoundingRect().width + obj.left - obj.getBoundingRect().left\r\n        );\r\n      }\r\n\r\n      throttlechangeActiveObjectValue();\r\n    });\r\n    this.canvas_sprite.on('object:scaling', function(e) {\r\n      var obj = e.target;\r\n      // if object is too big ignore\r\n      if (obj.currentHeight > obj.canvas.height || obj.currentWidth > obj.canvas.width) {\r\n        return;\r\n      }\r\n      obj.setCoords();\r\n      // top-left  corner\r\n      if (obj.getBoundingRect().top < 0 || obj.getBoundingRect().left < 0) {\r\n        obj.top = Math.max(obj.top, obj.top - obj.getBoundingRect().top);\r\n        obj.left = Math.max(obj.left, obj.left - obj.getBoundingRect().left);\r\n      }\r\n      // bot-right corner\r\n      if (\r\n        obj.getBoundingRect().top + obj.getBoundingRect().height > obj.canvas.height ||\r\n        obj.getBoundingRect().left + obj.getBoundingRect().width > obj.canvas.width\r\n      ) {\r\n        obj.top = Math.min(\r\n          obj.top,\r\n          obj.canvas.height - obj.getBoundingRect().height + obj.top - obj.getBoundingRect().top\r\n        );\r\n        obj.left = Math.min(\r\n          obj.left,\r\n          obj.canvas.width - obj.getBoundingRect().width + obj.left - obj.getBoundingRect().left\r\n        );\r\n      }\r\n      throttlechangeActiveObjectValue();\r\n    });\r\n    this.canvas_sprite.on('mouse:down', function(e) {\r\n      if (e.target) {\r\n        that.activeObject = e.target;\r\n        that.changeActiveObjectValue();\r\n      }\r\n    });\r\n    //解决放大缩小元素位置不对的问题\r\n    this.canvas_sprite.on('object:scaled', function(e) {\r\n      if (e.target) {\r\n        that.activeObject = e.target;\r\n        that.updateObject();\r\n      }\r\n    });\r\n    this.canvas_sprite.on('object:modified', function() {\r\n      that.updateCanvasState();\r\n    });\r\n\r\n    this.canvas_sprite.on('object:added', function() {\r\n      that.updateCanvasState();\r\n    });\r\n  }\r\n  @keydown(ALL_KEYS)\r\n  beginEdit(event) {\r\n    let that = this;\r\n    if (that.activeObject) {\r\n      //console.log('that.activeObject', that.activeObject);\r\n      if (event.which === 37) {\r\n        //左\r\n        event.preventDefault();\r\n        that.activeObject.set({\r\n          left: that.activeObject.left - 1\r\n        });\r\n      } else if (event.which === 39) {\r\n        //右\r\n        event.preventDefault();\r\n        that.activeObject.set({\r\n          left: that.activeObject.left + 1\r\n        });\r\n      } else if (event.which === 40) {\r\n        //上\r\n        event.preventDefault();\r\n        that.activeObject.set({\r\n          top: that.activeObject.top + 1\r\n        });\r\n      } else if (event.which === 38) {\r\n        //下\r\n        event.preventDefault();\r\n        that.activeObject.set({\r\n          top: that.activeObject.top - 1\r\n        });\r\n      } else if (event.which === 90) {\r\n        //ctrl+z\r\n        event.preventDefault();\r\n        that.handerUndo();\r\n      } else if (event.which === 89) {\r\n        //ctrl+y\r\n        event.preventDefault();\r\n        that.handerRedo();\r\n      } else if (event.which === 46) {\r\n        //delete\r\n        event.preventDefault();\r\n        this.canvas_sprite.remove(that.activeObject);\r\n      }\r\n      this.canvas_sprite.renderAll();\r\n    }\r\n    //console.log('event', event.which);\r\n    // Start editing\r\n  }\r\n  async addShape(index, action) {\r\n    const currentOptionArr = this.state.currentOptionArr;\r\n    let { type } = currentOptionArr[index];\r\n    let Shape;\r\n    switch (type) {\r\n      case 'text':\r\n        Shape = await this.addTextObject(index, action);\r\n        break;\r\n      case 'rect':\r\n        Shape = await this.addRectObject(index, action);\r\n        break;\r\n      case 'image':\r\n        Shape = await this.addImageObject(index, action);\r\n        break;\r\n      case 'qrcode':\r\n        Shape = await this.addQrcodeObject(index, action);\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n    this.canvas_sprite.setActiveObject(Shape);\r\n    this.activeObject = Shape;\r\n    this.canvas_sprite.add(Shape);\r\n  }\r\n  async addTextObject(index, action) {\r\n    const that = this;\r\n    let currentOptionArr;\r\n    if (action === 'update') {\r\n      currentOptionArr = this.state.currentOptionArr;\r\n    } else {\r\n      currentOptionArr = this.currentOptionArr;\r\n    }\r\n    //console.log('currentOptionArr', currentOptionArr);\r\n    let { css } = currentOptionArr[index];\r\n    let {\r\n      width,\r\n      text,\r\n      color,\r\n      fontSize,\r\n      left,\r\n      top,\r\n      fontWeight,\r\n      fontFamily,\r\n      padding,\r\n      textDecoration,\r\n      borderRadius,\r\n      borderWidth,\r\n      borderColor,\r\n      rotate,\r\n      //align,\r\n      shadow,\r\n      lineHeight,\r\n      textAlign,\r\n      maxLines,\r\n      textStyle,\r\n      background\r\n    } = css;\r\n    width = width / 1;\r\n    left = left / 1;\r\n    top = top / 1;\r\n    borderRadius = borderRadius / 1;\r\n    borderWidth = borderWidth / 1;\r\n    rotate = rotate / 1;\r\n    fontSize = fontSize / 1;\r\n    maxLines = maxLines / 1;\r\n    padding = padding / 1;\r\n    lineHeight = lineHeight / 1.08; //和painter调试得出的值\r\n    let Shape;\r\n    let config = {\r\n      width, //文字的高度随行高\r\n      fill: color,\r\n      fontWeight,\r\n      left: left, //距离画布左侧的距离，单位是像素\r\n      top: top,\r\n      fontSize, //文字大小\r\n      fontFamily,\r\n      padding,\r\n      [textDecoration]: true,\r\n      //lockUniScaling: true, //只能等比缩放\r\n      textAlign,\r\n      textStyle,\r\n      shadow,\r\n      //angle: rotate,\r\n      splitByGrapheme: true, //文字换行\r\n      zIndex: 2,\r\n      lineHeight,\r\n      editable: true,\r\n      maxLines: maxLines,\r\n      textDecoration: textDecoration,\r\n      lockScalingY: true\r\n    };\r\n    if (textStyle === 'stroke') {\r\n      config = {\r\n        ...config,\r\n        stroke: color,\r\n        fill: 'rgba(0,0,0)'\r\n      };\r\n    }\r\n\r\n    let textBox = new fabric.Textbox(text, config);\r\n    textBox.toObject = (function(toObject) {\r\n      return function() {\r\n        return fabric.util.object.extend(toObject.call(this), {\r\n          maxLines,\r\n          textDecoration,\r\n          textStyle\r\n        });\r\n      };\r\n    })(textBox.toObject);\r\n    //通过最大行高计算高度,并删除多余文字,多出文字..表示,三个会换行\r\n    if (textBox.textLines.length > maxLines) {\r\n      let text = '';\r\n      for (let index = 0; index < maxLines; index++) {\r\n        const element = textBox.textLines[index];\r\n        if (index === maxLines - 1) {\r\n          text = text + element + '...';\r\n        } else {\r\n          text += element;\r\n        }\r\n      }\r\n      textBox.set({\r\n        text\r\n      });\r\n      if (textBox.textLines.length > maxLines) {\r\n        let text = '';\r\n        for (let index = 0; index < maxLines; index++) {\r\n          const element = textBox.textLines[index];\r\n          if (index === maxLines - 1) {\r\n            text = text + element.substring(0, element.length - 3) + '...';\r\n          } else {\r\n            text += element;\r\n          }\r\n        }\r\n        textBox.set({\r\n          text\r\n        });\r\n      }\r\n    }\r\n    let height = textBox.height / 1 + (textBox.lineHeight / 1 - 1) * textBox.fontSize + padding * 2 + borderWidth * 2;\r\n    width = textBox.width + padding * 2 + borderWidth * 2;\r\n    left = textBox.left - padding;\r\n    top = css.top - padding;\r\n    /*  textBox.set({\r\n      top: top + height / 2\r\n    }); */\r\n    let Rect = new fabric.Rect({\r\n      width,\r\n      height,\r\n      left, //距离画布左侧的距离，单位是像素\r\n      top,\r\n      padding,\r\n      rx: borderRadius,\r\n      //ry:borderRadius,\r\n      strokeWidth: borderWidth / 1,\r\n      stroke: borderColor,\r\n      fill: background,\r\n      //angle: rotate,\r\n      shadow,\r\n      selectable: false\r\n    });\r\n    let gradientOption = '';\r\n    if (GD.api.isGradient(background)) {\r\n      gradientOption = GD.api.doGradient(background, width, height);\r\n    }\r\n    if (gradientOption) Rect.setGradient('fill', gradientOption);\r\n    Shape = new fabric.Group([Rect, textBox], {\r\n      width,\r\n      height,\r\n      left: left + width / 2, //距离画布左侧的距离，单位是像素\r\n      top: top + height / 2,\r\n      angle: rotate,\r\n      mytype: 'textGroup',\r\n      lockScalingY: true,\r\n      oldText: text,\r\n      originX: 'center',\r\n      originY: 'center',\r\n      centeredRotation: true\r\n    });\r\n    Shape.toObject = (function(toObject) {\r\n      return function() {\r\n        return fabric.util.object.extend(toObject.call(this), {\r\n          mytype: 'textGroup',\r\n          oldText: text\r\n        });\r\n      };\r\n    })(Shape.toObject);\r\n    Shape.on('scaling', function(e) {\r\n      let obj = this;\r\n      let width = obj.width;\r\n      let height = obj.height;\r\n      let w = obj.width * obj.scaleX;\r\n      let h = obj.height * obj.scaleY;\r\n      let oldText = obj.oldText;\r\n      Rect.set({\r\n        left: -(w - width / 2),\r\n        top: -(h - height / 2),\r\n        height: h,\r\n        width: w,\r\n        rx: borderRadius,\r\n        strokeWidth: borderWidth\r\n      });\r\n      textBox.set({\r\n        left: -(w - width / 2),\r\n        top: -(h - height / 2),\r\n        width,\r\n        height,\r\n        fontSize,\r\n        scaleX: 1,\r\n        scaleY: 1,\r\n        text: oldText\r\n      });\r\n      //控制行内文字\r\n      if (textBox.textLines.length > maxLines) {\r\n        let text = '';\r\n        for (let index = 0; index < maxLines; index++) {\r\n          const element = textBox.textLines[index];\r\n          if (index === maxLines - 1) {\r\n            text = text + element + '...';\r\n          } else {\r\n            text += element;\r\n          }\r\n        }\r\n        textBox.set({\r\n          text\r\n        });\r\n\r\n        if (textBox.textLines.length > maxLines) {\r\n          let text = '';\r\n          for (let index = 0; index < maxLines; index++) {\r\n            const element = textBox.textLines[index];\r\n            if (index === maxLines - 1) {\r\n              text = text + element.substring(0, element.length - 3) + '...';\r\n            } else {\r\n              text += element;\r\n            }\r\n          }\r\n          textBox.set({\r\n            text\r\n          });\r\n        }\r\n      }\r\n      obj.set({\r\n        height: h,\r\n        width: w,\r\n        scaleX: 1,\r\n        scaleY: 1,\r\n        originX: 'center'\r\n      });\r\n\r\n      that.canvas_sprite.renderAll();\r\n    });\r\n    return Shape;\r\n  }\r\n  async addRectObject(index, action) {\r\n    let currentOptionArr;\r\n    if (action === 'update') {\r\n      currentOptionArr = this.state.currentOptionArr;\r\n    } else {\r\n      currentOptionArr = this.currentOptionArr;\r\n    }\r\n    let { css } = currentOptionArr[index];\r\n    let {\r\n      width,\r\n      height,\r\n      left,\r\n      top,\r\n      borderRadius,\r\n      borderWidth,\r\n      borderColor,\r\n      background,\r\n      rotate,\r\n      //align,\r\n      shadow\r\n    } = css;\r\n    width = width / 1;\r\n    height = height / 1;\r\n    left = left / 1;\r\n    top = top / 1;\r\n    borderRadius = borderRadius / 1;\r\n    borderWidth = borderWidth / 1;\r\n    rotate = rotate / 1;\r\n    let group = new fabric.Group([], {\r\n      left: left + width / 2 + borderWidth,\r\n      top: top + height / 2 + borderWidth,\r\n      width: width + borderWidth,\r\n      height: height + borderWidth,\r\n      rx: borderRadius / 1,\r\n      strokeWidth: borderWidth / 1,\r\n      stroke: borderColor,\r\n      fill: background,\r\n      originX: 'center',\r\n      originY: 'center',\r\n      angle: rotate,\r\n      myshadow: shadow,\r\n      mytype: 'rect',\r\n      lockUniScaling: true //只能等比缩放\r\n    });\r\n    let gradientOption = '';\r\n    if (GD.api.isGradient(background)) {\r\n      gradientOption = GD.api.doGradient(background, width, height);\r\n    }\r\n    let rect = new fabric.Rect({\r\n      width,\r\n      height,\r\n      left: 0,\r\n      top: 0,\r\n      rx: borderRadius,\r\n      fill: background,\r\n      originX: 'center',\r\n      originY: 'center'\r\n    });\r\n    if (gradientOption) rect.setGradient('fill', gradientOption);\r\n    group.add(rect);\r\n    //添加边框\r\n    group.add(\r\n      new fabric.Rect({\r\n        width: width + borderWidth,\r\n        height: height + borderWidth,\r\n        left: 0,\r\n        top: 0,\r\n        originX: 'center',\r\n        originY: 'center',\r\n        //padding,\r\n        rx: borderRadius + borderWidth / 2,\r\n        strokeWidth: borderWidth / 1,\r\n        stroke: borderColor,\r\n        fill: 'rgba(0,0,0,0)',\r\n        shadow,\r\n        selectable: false\r\n      })\r\n    );\r\n    group.toObject = (function(toObject) {\r\n      return function() {\r\n        return fabric.util.object.extend(toObject.call(this), {\r\n          mytype: 'rect',\r\n          rx: borderRadius + borderWidth / 2,\r\n          myshadow: shadow\r\n        });\r\n      };\r\n    })(group.toObject);\r\n    return group;\r\n  }\r\n  async addImageObject(index, action) {\r\n    let currentOptionArr;\r\n    if (action === 'update') {\r\n      currentOptionArr = this.state.currentOptionArr;\r\n    } else {\r\n      currentOptionArr = this.currentOptionArr;\r\n    }\r\n    let { css } = currentOptionArr[index];\r\n    let {\r\n      width,\r\n      height,\r\n      left,\r\n      top,\r\n      borderRadius,\r\n      borderWidth,\r\n      borderColor,\r\n      background,\r\n      rotate,\r\n      //align,\r\n      shadow,\r\n      mode,\r\n      url\r\n    } = css;\r\n    width = width / 1;\r\n    height = height / 1;\r\n    left = left / 1;\r\n    top = top / 1;\r\n    borderRadius = borderRadius / 1;\r\n    borderWidth = borderWidth / 1;\r\n    rotate = rotate / 1;\r\n\r\n    let Shape = await this.loadImageUrl(url);\r\n    let imgWidth = Shape.width;\r\n    let imgHeight = Shape.height;\r\n    Shape.set({\r\n      url,\r\n      //align,\r\n      mode,\r\n      shadow,\r\n      originX: 'center',\r\n      originY: 'center'\r\n    });\r\n    if (mode === 'scaleToFill') {\r\n      Shape.set({\r\n        width: imgWidth,\r\n        height: imgHeight,\r\n        scaleX: width / imgWidth,\r\n        scaleY: height / imgHeight,\r\n        oldScaleX: width / imgWidth,\r\n        oldScaleY: height / imgHeight\r\n      });\r\n      Shape.clipPath = new fabric.Rect({\r\n        width,\r\n        height,\r\n        originX: 'center',\r\n        originY: 'center',\r\n        rx: borderRadius,\r\n        scaleX: imgWidth / width,\r\n        scaleY: imgHeight / height\r\n      });\r\n    } else if (mode === 'auto') {\r\n      //忽略高度会自适应宽度,等比缩放图片\r\n      Shape.set({\r\n        width: imgWidth,\r\n        height: imgHeight,\r\n        scaleX: width / imgWidth,\r\n        scaleY: width / imgWidth,\r\n        oldScaleX: width / imgWidth,\r\n        oldScaleY: height / imgHeight\r\n      });\r\n      Shape.clipPath = new fabric.Rect({\r\n        width,\r\n        height,\r\n        originX: 'center',\r\n        originY: 'center',\r\n        rx: borderRadius,\r\n        scaleX: imgWidth / width,\r\n        scaleY: imgHeight / height\r\n      });\r\n    } else if (mode === 'aspectFill') {\r\n      Shape.clipPath = new fabric.Rect({\r\n        width: width / 1,\r\n        height: height / 1,\r\n        originX: 'center',\r\n        originY: 'center',\r\n        rx: borderRadius / 1\r\n      });\r\n      Shape.set({\r\n        width,\r\n        height\r\n      });\r\n    }\r\n    let group = new fabric.Group([Shape], {\r\n      left: left + width / 2 + borderWidth,\r\n      top: top + height / 2 + borderWidth,\r\n      width: width + borderWidth,\r\n      height: height + borderWidth,\r\n      rx: borderRadius / 1,\r\n      strokeWidth: borderWidth / 1,\r\n      stroke: borderColor,\r\n      fill: background,\r\n      angle: rotate,\r\n      shadow,\r\n      originX: 'center',\r\n      originY: 'center',\r\n      mytype: 'image',\r\n      mode,\r\n      url,\r\n      lockUniScaling: true //只能等比缩放\r\n    });\r\n    //添加边框\r\n    group.add(\r\n      new fabric.Rect({\r\n        width: width + borderWidth,\r\n        height: height + borderWidth,\r\n        left: 0,\r\n        top: 0,\r\n        originX: 'center',\r\n        originY: 'center',\r\n        //padding,\r\n        rx: borderRadius + borderWidth / 2,\r\n        strokeWidth: borderWidth / 1,\r\n        stroke: borderColor,\r\n        fill: 'rgba(0,0,0,0)',\r\n        shadow,\r\n        selectable: false\r\n      })\r\n    );\r\n    group.toObject = (function(toObject) {\r\n      return function() {\r\n        return fabric.util.object.extend(toObject.call(this), {\r\n          mytype: 'image',\r\n          mode,\r\n          url,\r\n          rx: borderRadius + borderWidth / 2,\r\n          oldScaleX: width / imgWidth,\r\n          oldScaleY: height / imgHeight\r\n        });\r\n      };\r\n    })(group.toObject);\r\n    //console.log('group', group);\r\n    return group;\r\n  }\r\n  async addQrcodeObject(index, action) {\r\n    let currentOptionArr;\r\n    if (action === 'update') {\r\n      currentOptionArr = this.state.currentOptionArr;\r\n    } else {\r\n      currentOptionArr = this.currentOptionArr;\r\n    }\r\n    let { css } = currentOptionArr[index];\r\n    let {\r\n      width,\r\n      left,\r\n      top,\r\n      color,\r\n      borderRadius,\r\n      //borderWidth,\r\n      //borderColor,\r\n      background,\r\n      rotate,\r\n      url\r\n      //align,\r\n    } = css;\r\n    width = width / 1;\r\n    left = left / 1 + width / 2;\r\n    top = top / 1 + width / 2;\r\n    rotate = rotate / 1;\r\n    let imgBase64 = jrQrcode.getQrBase64(url, {\r\n      padding: 0, // 二维码四边空白（默认为10px）\r\n      width: width / 1, // 二维码图片宽度（默认为256px）\r\n      height: width / 1, // 二维码图片高度（默认为256px）\r\n      correctLevel: QRErrorCorrectLevel.H, // 二维码容错level（默认为高）\r\n      reverse: false, // 反色二维码，二维码颜色为上层容器的背景颜色\r\n      background: background, // 二维码背景颜色（默认白色）\r\n      foreground: color // 二维码颜色（默认黑色）\r\n    });\r\n    let Shape = await this.loadImageUrl(imgBase64);\r\n    Shape.set({\r\n      url,\r\n      width: width / 1,\r\n      height: width / 1,\r\n      left,\r\n      top,\r\n      color,\r\n      background,\r\n      rx: borderRadius / 1,\r\n      //strokeWidth: borderWidth / 1,\r\n      //stroke: borderColor,\r\n      //align,\r\n      angle: rotate / 1,\r\n      lockUniScaling: true, //只能等比缩放\r\n      originX: 'center',\r\n      originY: 'center',\r\n      mytype: 'qrcode'\r\n    });\r\n    Shape.clipPath = new fabric.Rect({\r\n      width,\r\n      height: width / 1,\r\n      originX: 'center',\r\n      originY: 'center',\r\n      rx: borderRadius,\r\n      angle: rotate / 1\r\n    });\r\n    Shape.toObject = (function(toObject) {\r\n      return function() {\r\n        return fabric.util.object.extend(toObject.call(this), {\r\n          mytype: 'qrcode',\r\n          url,\r\n          color,\r\n          background,\r\n          rx: borderRadius / 1\r\n        });\r\n      };\r\n    })(Shape.toObject);\r\n    return Shape;\r\n  }\r\n  loadImageUrl(imgUrl) {\r\n    return new Promise(resolve => {\r\n      fabric.Image.fromURL(imgUrl, function(oImg) {\r\n        resolve(oImg);\r\n      });\r\n    });\r\n  }\r\n  updateObject() {\r\n    let type = this.activeObject.mytype;\r\n    this.canvas_sprite.remove(this.activeObject);\r\n    switch (type) {\r\n      case 'textGroup':\r\n        this.addShape(1, 'update');\r\n        break;\r\n      case 'rect':\r\n        this.addShape(2, 'update');\r\n        break;\r\n      case 'image':\r\n        this.addShape(3, 'update');\r\n        break;\r\n      case 'qrcode':\r\n        this.addShape(4, 'update');\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n    this.canvas_sprite.renderAll();\r\n  }\r\n\r\n  changeActiveObjectValue() {\r\n    this.setState({\r\n      visible: true\r\n    });\r\n    let type = this.activeObject.mytype;\r\n    let item2 = this.activeObject;\r\n    let width = `${(item2.width - item2.strokeWidth) * item2.scaleX}`;\r\n    let height = `${(item2.height - item2.strokeWidth) * item2.scaleY}`;\r\n    //console.log(item2.left / item2.scaleY, item2.left, item2.scaleY);\r\n    let css = {\r\n      color: `${item2.color}`,\r\n      background: `${item2.fill}`,\r\n      width,\r\n      height,\r\n      top: `${(item2.top / item2.scaleY - (item2.height - item2.strokeWidth) / 2 - item2.strokeWidth).toFixed(2)}`,\r\n      left: `${(item2.left / item2.scaleY - (item2.width - item2.strokeWidth) / 2 - item2.strokeWidth).toFixed(2)}`,\r\n      rotate: `${item2.angle}`,\r\n      borderRadius: `${item2.rx * item2.scaleY}`,\r\n      borderWidth: `${item2.strokeWidth * item2.scaleY}`,\r\n      borderColor: `${item2.stroke}`,\r\n      //align: `${item2.align}`,\r\n      shadow: `${item2.shadow}`\r\n    };\r\n    let index = '';\r\n    switch (type) {\r\n      case 'textGroup':\r\n        index = 1;\r\n        item2._objects.forEach(ele => {\r\n          if (ele.type === 'rect') {\r\n            delete css.height;\r\n            css = {\r\n              ...css,\r\n              width: `${item2.width * item2.scaleX - ele.strokeWidth * 2}`,\r\n              height: `${item2.height * item2.scaleY - ele.strokeWidth * 2}`,\r\n              background: `${ele.fill}`,\r\n              borderRadius: `${ele.rx}`,\r\n              borderWidth: `${ele.strokeWidth}`,\r\n              borderColor: `${ele.stroke}`\r\n            };\r\n          } else {\r\n            delete css.height;\r\n            css = {\r\n              text: `${item2.oldText}`,\r\n              maxLines: `${ele.maxLines}`,\r\n              ...css,\r\n              color: ele.fill,\r\n              padding: `${ele.padding}`,\r\n              fontSize: `${ele.fontSize}`,\r\n              fontWeight: `${ele.fontWeight}`,\r\n              lineHeight: `${ele.lineHeight * 1.08}`,\r\n              textStyle: `${ele.textStyle}`,\r\n              textDecoration: `${ele.textDecoration === 'linethrough' ? 'line-through' : ele.textDecoration}`,\r\n              fontFamily: `${ele.fontFamily}`,\r\n              textAlign: `${ele.textAlign}`,\r\n              shadow: `${ele.shadow}`\r\n            };\r\n          }\r\n        });\r\n        break;\r\n      case 'rect':\r\n        index = 2;\r\n        delete css.color;\r\n        css = {\r\n          ...css,\r\n          shadow: `${item2.myshadow}`\r\n        };\r\n        break;\r\n      case 'image':\r\n        index = 3;\r\n        delete css.color;\r\n        delete css.background;\r\n        css = {\r\n          url: item2.url,\r\n          ...css,\r\n          mode: `${item2.mode}`\r\n        };\r\n        break;\r\n      case 'qrcode':\r\n        index = 4;\r\n        delete css.height;\r\n        delete css.borderWidth;\r\n        delete css.borderColor;\r\n        delete css.shadow;\r\n        css = {\r\n          url: item2.url,\r\n          ...css,\r\n          color: item2.color,\r\n          background: item2.background\r\n        };\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n    let currentOptionArr = _.cloneDeep(this.state.currentOptionArr);\r\n    currentOptionArr[index].css = css;\r\n    this.setState({\r\n      currentOptionArr\r\n    });\r\n  }\r\n  onClose = () => {\r\n    this.setState({\r\n      visible: false\r\n    });\r\n  };\r\n  generateCode() {\r\n    let canvas_sprite = this.canvas_sprite;\r\n    this.views = [];\r\n    canvas_sprite.getObjects().forEach((item2, index) => {\r\n      let view = {};\r\n      let width = item2.width * item2.scaleX;\r\n      let height = item2.height * item2.scaleY;\r\n      let css = {\r\n        color: `${item2.color}`,\r\n        background: `${item2.fill}`,\r\n        width: `${width}px`,\r\n        height: `${height}px`,\r\n        top: `${item2.top - height / 2 + item2.strokeWidth / 2}px`,\r\n        left: `${item2.left - width / 2 + item2.strokeWidth / 2}px`,\r\n        rotate: `${item2.angle}`,\r\n        borderRadius: `${item2.rx * item2.scaleY}px`,\r\n        borderWidth: `${item2.strokeWidth ? item2.strokeWidth * item2.scaleY + 'px' : ''}`,\r\n        borderColor: `${item2.stroke}`,\r\n        //align: `${item2.align}`,\r\n        shadow: `${item2.shadow}`\r\n      };\r\n      //console.log('canvas_sprite.toObject(item2)', canvas_sprite.toObject(item2));\r\n\r\n      let type = item2.mytype;\r\n      if (type === 'image') {\r\n        delete css.color;\r\n        delete css.background;\r\n        view = {\r\n          type,\r\n          url: `${item2.url}`,\r\n          css: {\r\n            ...css,\r\n            mode: `${item2.mode}`,\r\n            width: `${(item2.width - item2.strokeWidth) * item2.scaleX}px`,\r\n            height: `${(item2.height - item2.strokeWidth) * item2.scaleY}px`\r\n          }\r\n        };\r\n      } else if (type === 'qrcode') {\r\n        //delete css.borderRadius;\r\n        delete css.borderWidth;\r\n        delete css.borderColor;\r\n        delete css.shadow;\r\n        view = {\r\n          type,\r\n          content: `${item2.url}`,\r\n          css: {\r\n            ...css,\r\n            background: item2.background /* ,\r\n              padding: `${item2.padding}rpx` */\r\n          }\r\n        };\r\n      } else if (type === 'textGroup') {\r\n        item2._objects.forEach(ele => {\r\n          if (ele.type === 'rect') {\r\n            view = {\r\n              ...view,\r\n              type: 'text',\r\n              css: {\r\n                ...css,\r\n                ...view.css,\r\n                left: `${item2.left - width / 2 + ele.padding + ele.strokeWidth}px`,\r\n                top: `${item2.top - height / 2 + ele.padding + ele.strokeWidth}px`,\r\n                background: `${ele.fill}`,\r\n                borderRadius: `${ele.rx}px`,\r\n                borderWidth: `${ele.strokeWidth ? ele.strokeWidth + 'px' : ''}`,\r\n                borderColor: `${ele.stroke}`\r\n              }\r\n            };\r\n          } else {\r\n            view = {\r\n              ...view,\r\n              type: 'text',\r\n              text: `${item2.oldText}`,\r\n              css: {\r\n                ...css,\r\n                ...view.css,\r\n                width: `${ele.width}px`,\r\n                height: `${ele.height}px`,\r\n                color: ele.fill,\r\n                padding: `${ele.padding}px`,\r\n                fontSize: `${ele.fontSize}px`,\r\n                fontWeight: `${ele.fontWeight}`,\r\n                maxLines: `${ele.maxLines}`,\r\n                lineHeight: `${ele.lineHeight * 1.08 * ele.fontSize}px`,\r\n                textStyle: `${ele.textStyle}`,\r\n                textDecoration: `${ele.textDecoration === 'linethrough' ? 'line-through' : ele.textDecoration}`,\r\n                fontFamily: `${ele.fontFamily}`,\r\n                textAlign: `${ele.textAlign}`,\r\n                shadow: `${ele.shadow}`\r\n              }\r\n            };\r\n          }\r\n        });\r\n      } else if (type === 'rect') {\r\n        delete css.color;\r\n        if (item2.strokeWidth === 0) {\r\n          delete css.borderWidth;\r\n          delete css.borderColor;\r\n        }\r\n        view = {\r\n          type,\r\n          css: {\r\n            ...css,\r\n            color: item2.fill,\r\n            width: `${(item2.width - item2.strokeWidth) * item2.scaleX}px`,\r\n            height: `${(item2.height - item2.strokeWidth) * item2.scaleY}px`,\r\n            shadow: `${item2.myshadow}`\r\n          }\r\n        };\r\n      }\r\n      this.views.push(view);\r\n    });\r\n    this.finallObj = {\r\n      width: `${canvas_sprite.width}px`,\r\n      height: `${canvas_sprite.height}px`,\r\n      background: canvas_sprite.backgroundColor,\r\n      views: this.views\r\n    };\r\n    this.miniCode = `\r\n    export default class LastMayday {\r\n      palette() {\r\n        return (\r\n${json.plain(this.finallObj).replace(/px/g, 'px')}\r\n        );\r\n      }\r\n    }\r\n    `;\r\n    //console.log('finallObj', json.plain(this.finallObj).replace(/px/g, 'rpx'));\r\n  }\r\n  clearCanvas() {\r\n    this.rects.forEach(function(item, i) {\r\n      item.remove();\r\n    });\r\n    this.texts.forEach(function(item, i) {\r\n      item.remove();\r\n    });\r\n  }\r\n  copyCode() {\r\n    this.generateCode();\r\n    if (copy(this.miniCode)) {\r\n      message.success(`复制成功,请赶快去painter粘贴代码查看效果`, 2);\r\n    } else {\r\n      message.error(`复制失败,请重试或者去谷歌浏览器尝试`, 2);\r\n    }\r\n  }\r\n  viewCode() {\r\n    this.generateCode();\r\n    this.setState({\r\n      visibleCode: true\r\n    });\r\n  }\r\n  exportCode() {\r\n    //console.log('exportCode', _config.canvasState[_config.canvasState.length - 1]);\r\n    copy(/* 'export default' +  */ _config.canvasState[_config.canvasState.length - 1]);\r\n  }\r\n  importCode() {\r\n    this.setState({\r\n      visibleImportCode: true\r\n    });\r\n  }\r\n  confirmImportCode() {\r\n    let canvas_sprite = this.canvas_sprite;\r\n\r\n    const delay = ms =>\r\n      new Promise(resolve => {\r\n        clearTimeout(this.delayT);\r\n        this.delayT = setTimeout(resolve, ms);\r\n      });\r\n    canvas_sprite.loadFromJSON(this.state.importCodeJson, async () => {\r\n      this.setState({\r\n        visibleImportCode: false\r\n      });\r\n      let Objects = canvas_sprite.getObjects();\r\n      for (let index = 0; index < Objects.length; index++) {\r\n        const element = Objects[index];\r\n        this.activeObject = element;\r\n        this.changeActiveObjectValue();\r\n        await delay(10);\r\n        this.updateObject();\r\n        await delay(10);\r\n      }\r\n      this.setState({\r\n        importCodeJson: ''\r\n      });\r\n      message.success(`画面加载成功`, 2);\r\n    });\r\n  }\r\n  updateCanvasState() {\r\n    let that = this;\r\n    let canvas_sprite = this.canvas_sprite;\r\n    if (_config.undoStatus === false && _config.redoStatus === false) {\r\n      var jsonData = canvas_sprite.toJSON();\r\n      var canvasAsJson = JSON.stringify(jsonData);\r\n      if (_config.currentStateIndex < _config.canvasState.length - 1) {\r\n        var indexToBeInserted = _config.currentStateIndex + 1;\r\n        _config.canvasState[indexToBeInserted] = canvasAsJson;\r\n        var numberOfElementsToRetain = indexToBeInserted + 1;\r\n        _config.canvasState = _config.canvasState.splice(0, numberOfElementsToRetain);\r\n      } else {\r\n        _config.canvasState.push(canvasAsJson);\r\n      }\r\n      _config.currentStateIndex = _config.canvasState.length - 1;\r\n      if (_config.currentStateIndex === _config.canvasState.length - 1 && _config.currentStateIndex !== -1) {\r\n        that.setState({\r\n          redoButtonStatus: 'disabled'\r\n        });\r\n      }\r\n    }\r\n  }\r\n  handerUndo() {\r\n    let that = this;\r\n    let canvas_sprite = this.canvas_sprite;\r\n    if (_config.undoFinishedStatus) {\r\n      if (_config.currentStateIndex === -1) {\r\n        _config.undoStatus = false;\r\n      } else {\r\n        if (_config.canvasState.length >= 1) {\r\n          _config.undoFinishedStatus = 0;\r\n          if (_config.currentStateIndex !== 0) {\r\n            _config.undoStatus = true;\r\n            canvas_sprite.loadFromJSON(_config.canvasState[_config.currentStateIndex - 1], function() {\r\n              //var jsonData = JSON.parse(_config.canvasState[_config.currentStateIndex - 1]);\r\n              canvas_sprite.renderAll();\r\n              _config.undoStatus = false;\r\n              _config.currentStateIndex -= 1;\r\n              that.setState({\r\n                undoButtonStatus: ''\r\n              });\r\n              if (_config.currentStateIndex !== _config.canvasState.length - 1) {\r\n                that.setState({\r\n                  redoButtonStatus: ''\r\n                });\r\n              }\r\n              _config.undoFinishedStatus = 1;\r\n            });\r\n          } else if (_config.currentStateIndex === 0) {\r\n            canvas_sprite.clear();\r\n            _config.undoFinishedStatus = 1;\r\n            that.setState({\r\n              redoButtonStatus: '',\r\n              undoButtonStatus: 'disabled'\r\n            });\r\n            _config.currentStateIndex -= 1;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n  handerRedo() {\r\n    let that = this;\r\n    let canvas_sprite = this.canvas_sprite;\r\n    if (_config.redoFinishedStatus) {\r\n      if (_config.currentStateIndex === _config.canvasState.length - 1 && _config.currentStateIndex !== -1) {\r\n        that.setState({\r\n          redoButtonStatus: 'disabled'\r\n        });\r\n      } else {\r\n        if (_config.canvasState.length > _config.currentStateIndex && _config.canvasState.length !== 0) {\r\n          _config.redoFinishedStatus = 0;\r\n          _config.redoStatus = true;\r\n          canvas_sprite.loadFromJSON(_config.canvasState[_config.currentStateIndex + 1], function() {\r\n            //var jsonData = JSON.parse(_config.canvasState[_config.currentStateIndex + 1]);\r\n            canvas_sprite.renderAll();\r\n            _config.redoStatus = false;\r\n            _config.currentStateIndex += 1;\r\n            if (_config.currentStateIndex !== -1) {\r\n              that.setState({\r\n                undoButtonStatus: ''\r\n              });\r\n            }\r\n            _config.redoFinishedStatus = 1;\r\n            if (_config.currentStateIndex === _config.canvasState.length - 1 && _config.currentStateIndex !== -1) {\r\n              that.setState({\r\n                redoButtonStatus: 'disabled'\r\n              });\r\n            }\r\n          });\r\n        }\r\n      }\r\n    }\r\n  }\r\n  render() {\r\n    const { visible, visibleCode, visibleImportCode, currentOptionArr, currentObjectType } = this.state;\r\n    return (\r\n      <div id='main'>\r\n        <div className='slide'>\r\n          <canvas id='merge' width='700' height='1000' />\r\n        </div>\r\n        <div className='main-container'>\r\n          <div className='box'>\r\n            <div className='btns'>\r\n              {/* <div className='btn'>\r\n                <Button type='primary' onClick={this.handerUndo}>\r\n                  撤销\r\n                </Button>\r\n              </div>\r\n              <div className='btn'>\r\n                <Button type='primary' onClick={this.handerRedo}>\r\n                  恢复\r\n                </Button>\r\n              </div> */}\r\n              <div className='btn'>\r\n                <Button type='primary' onClick={this.copyCode}>\r\n                  复制代码\r\n                </Button>\r\n              </div>\r\n              {/* <div className='btn'>\r\n                <Button type='primary' onClick={this.viewCode}>\r\n                  查看代码\r\n                </Button>\r\n              </div> */}\r\n              <div className='btn'>\r\n                <Button type='primary' onClick={this.exportCode}>\r\n                  导出json\r\n                </Button>\r\n              </div>\r\n              <div className='btn'>\r\n                <Button type='primary' onClick={this.importCode}>\r\n                  导入json\r\n                </Button>\r\n              </div>\r\n            </div>\r\n            <div className='code' />\r\n          </div>\r\n          <div className='option'>\r\n            <div className='box'>\r\n              <div className='btns'>\r\n                <Radio.Group\r\n                  value={currentObjectType}\r\n                  onChange={e => {\r\n                    this.setState({ currentObjectType: e.target.value });\r\n                  }}\r\n                >\r\n                  {optionArr.map((item, i) => {\r\n                    return (\r\n                      <Radio.Button value={item.type} key={i}>\r\n                        {item.name}\r\n                      </Radio.Button>\r\n                    );\r\n                  })}\r\n                </Radio.Group>\r\n              </div>\r\n            </div>\r\n            {optionArr.map((item, i) => {\r\n              if (item.type === currentObjectType) {\r\n                return (\r\n                  <div key={i} className='option-li'>\r\n                    <div className='row'>\r\n                      <div className='h3'>{item.name} </div>\r\n                      {item.type !== 'canvas' && (\r\n                        <div className='btn'>\r\n                          <Button type='primary' onClick={this.addShape.bind(this, i)}>\r\n                            添加\r\n                          </Button>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                    {Object.keys(item.css).map((item2, i2) => {\r\n                      /* if (item2 === 'rotate') {\r\n                        return null;\r\n                      } */\r\n                      return (\r\n                        <div className='row' key={i2}>\r\n                          <div className='h3'>{item2} </div>\r\n                          {!_.isArray(item.css[item2]) && (\r\n                            <Input\r\n                              defaultValue={item.css[item2]}\r\n                              onChange={event => {\r\n                                this.currentOptionArr[i].css[item2] = event.target.value;\r\n                                if (item.type === 'canvas') {\r\n                                  if (item2 === 'width') {\r\n                                    this.canvas_sprite.setWidth(event.target.value);\r\n                                  } else if (item2 === 'height') {\r\n                                    this.canvas_sprite.setHeight(event.target.value);\r\n                                  } else if (item2 === 'backgroundColor') {\r\n                                    this.canvas_sprite.setBackgroundColor(event.target.value);\r\n                                    this.canvas_sprite.renderAll();\r\n                                  }\r\n                                }\r\n                              }}\r\n                            />\r\n                          )}\r\n                          {_.isArray(item.css[item2]) && (\r\n                            <Select\r\n                              defaultValue={item.css[item2][0]}\r\n                              style={{ width: 120 }}\r\n                              onChange={value => {\r\n                                this.currentOptionArr[i].css[item2] = value;\r\n                              }}\r\n                            >\r\n                              {item.css[item2].map((item3, i3) => {\r\n                                return (\r\n                                  <Option value={item3} key={i3}>\r\n                                    {item3}\r\n                                  </Option>\r\n                                );\r\n                              })}\r\n                            </Select>\r\n                          )}\r\n                        </div>\r\n                      );\r\n                    })}\r\n                  </div>\r\n                );\r\n              }\r\n            })}\r\n          </div>\r\n        </div>\r\n        <div className='example'>\r\n          {exampleData.map((item, i) => {\r\n            return (\r\n              <div\r\n                className='li'\r\n                key={i}\r\n                onClick={() => {\r\n                  this.setState(\r\n                    {\r\n                      importCodeJson: item.json\r\n                    },\r\n                    this.confirmImportCode\r\n                  );\r\n                }}\r\n              >\r\n                <img src={item.src} alt='' />\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n        <Drawer title='编辑对象' width={400} onClose={this.onClose} visible={visible} mask={false} placement='left'>\r\n          {currentOptionArr.map((item, i) => {\r\n            let type = this.activeObject.mytype;\r\n            if (type === 'textGroup') {\r\n              type = 'text';\r\n            }\r\n            if (item.type === type) {\r\n              return (\r\n                <div key={i} className='option-li'>\r\n                  <div className='row'>\r\n                    <div className='h3'>{item.name} </div>\r\n                  </div>\r\n                  {Object.keys(item.css).map((item2, i2) => {\r\n                    /* if (item2 === 'rotate') {\r\n                      return null;\r\n                    } */\r\n                    return (\r\n                      <div className='row' key={i2}>\r\n                        <div className='h3'>{item2} </div>\r\n                        {!_.isArray(optionArr[i].css[item2]) && (\r\n                          <Input\r\n                            defaultValue={item.css[item2]}\r\n                            value={item.css[item2]}\r\n                            onChange={event => {\r\n                              let currentOptionArr = _.cloneDeep(this.state.currentOptionArr);\r\n                              currentOptionArr[i].css[item2] = event.target.value;\r\n                              this.setState(\r\n                                {\r\n                                  currentOptionArr\r\n                                },\r\n                                () => {\r\n                                  this.updateObject();\r\n                                }\r\n                              );\r\n                            }}\r\n                          />\r\n                        )}\r\n                        {_.isArray(optionArr[i].css[item2]) && (\r\n                          <Select\r\n                            defaultValue={item.css[item2]}\r\n                            value={item.css[item2]}\r\n                            style={{ width: 120 }}\r\n                            onChange={value => {\r\n                              let currentOptionArr = _.cloneDeep(this.state.currentOptionArr);\r\n                              currentOptionArr[i].css[item2] = value;\r\n                              this.setState(\r\n                                {\r\n                                  currentOptionArr\r\n                                },\r\n                                () => {\r\n                                  this.updateObject();\r\n                                }\r\n                              );\r\n                            }}\r\n                          >\r\n                            {optionArr[i].css[item2].map((item3, i3) => {\r\n                              return (\r\n                                <Option value={item3} key={i3}>\r\n                                  {item3}\r\n                                </Option>\r\n                              );\r\n                            })}\r\n                          </Select>\r\n                        )}\r\n                      </div>\r\n                    );\r\n                  })}\r\n                </div>\r\n              );\r\n            }\r\n          })}\r\n        </Drawer>\r\n        <Modal\r\n          title='view code'\r\n          visible={visibleCode}\r\n          onCancel={() => {\r\n            this.setState({\r\n              visibleCode: false\r\n            });\r\n          }}\r\n          footer={[\r\n            <Button key='submit' type='primary' onClick={this.copyCode}>\r\n              复制代码\r\n            </Button>\r\n          ]}\r\n        >\r\n          <ReactMarkdown\r\n            source={`\\`\\`\\`\r\n${this.miniCode}\r\n          `}\r\n          />\r\n        </Modal>\r\n        <Modal\r\n          title='导入代码'\r\n          visible={visibleImportCode}\r\n          onCancel={() => {\r\n            this.setState({\r\n              visibleImportCode: false\r\n            });\r\n          }}\r\n          footer={[\r\n            <Button key='submit' type='primary' onClick={this.confirmImportCode}>\r\n              确定\r\n            </Button>\r\n          ]}\r\n        >\r\n          <TextArea\r\n            placeholder='请将代码复制进来'\r\n            value={this.state.importCodeJson}\r\n            autosize={{ minRows: 10, maxRows: 6 }}\r\n            onChange={e => {\r\n              this.setState({\r\n                importCodeJson: e.target.value\r\n              });\r\n              //this.importCodeJson = e.target.value;\r\n            }}\r\n          />\r\n        </Modal>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nexport default App;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n//import { BrowserRouter as Router, Route, Link } from 'react-router-dom';\nimport './index.css';\nimport * as serviceWorker from './serviceWorker';\nimport App from './App'; // 导入App组件\n/* import About from './components/About'; // 导入About组件\nimport Inbox from './components/Inbox'; // 导入Inbox组件 */\n\nReactDOM.render(\n  <div>\n    <App />\n  </div>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}